<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Module 3 Lab Portfolio - JavaScript Programming</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                line-height: 1.6;
                color: #333;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }

            .header {
                text-align: center;
                color: white;
                margin-bottom: 40px;
                padding: 40px 0;
            }

            .header h1 {
                font-size: 3em;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .header h2 {
                font-size: 1.8em;
                margin: 10px 0;
                font-weight: 300;
                opacity: 0.9;
            }

            .header p {
                font-size: 1.2em;
                opacity: 0.9;
            }

            .lab-section {
                background: white;
                margin-bottom: 30px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                transition: transform 0.3s ease;
            }

            .lab-section:hover {
                transform: translateY(-5px);
            }

            .lab-header {
                background: linear-gradient(45deg, rgb(210, 105, 30), rgb(190, 95, 25));
                color: white;
                padding: 20px;
                cursor: pointer;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .lab-header h2 {
                font-size: 1.5em;
            }

            .toggle-icon {
                font-size: 1.2em;
                transition: transform 0.3s ease;
            }

            .lab-content {
                padding: 20px;
                display: none;
            }

            .lab-content.active {
                display: block;
            }

            .lab-description {
                background: #f8f9fa;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 20px;
                border-left: 4px solid rgb(210, 105, 30);
            }

            .code-section {
                background: #f8f9fa;
                border: 1px solid #e9ecef;
                border-radius: 8px;
                margin: 15px 0;
                overflow: hidden;
            }

            .code-header {
                background: #e9ecef;
                padding: 10px 15px;
                font-weight: bold;
                color: #495057;
                border-bottom: 1px solid #dee2e6;
            }

            .code-display {
                background: #2d3748;
                color: #e2e8f0;
                padding: 15px;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                line-height: 1.4;
                white-space: pre-wrap;
                overflow-x: auto;
                max-height: 400px;
                overflow-y: auto;
            }

            .demo-section {
                background: #f8f9fa;
                border: 2px dashed #ddd;
                border-radius: 8px;
                padding: 20px;
                margin: 20px 0;
            }

            .demo-controls {
                display: flex;
                gap: 10px;
                margin: 15px 0;
                flex-wrap: wrap;
            }

            .demo-button {
                background: linear-gradient(45deg, rgb(210, 105, 30), rgb(190, 95, 25));
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                font-weight: bold;
                transition: all 0.3s ease;
            }

            .demo-button:hover {
                background: linear-gradient(45deg, rgb(190, 95, 25), rgb(170, 85, 20));
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            }

            .demo-button:disabled {
                background: #ccc;
                cursor: not-allowed;
                transform: none;
                box-shadow: none;
            }

            .output-display {
                background: #1a202c;
                color: #68d391;
                padding: 15px;
                border-radius: 6px;
                font-family: 'Courier New', monospace;
                margin: 15px 0;
                min-height: 120px;
                white-space: pre-wrap;
                overflow-y: auto;
                max-height: 300px;
                border: 2px solid #4a5568;
            }

            .input-group {
                display: flex;
                gap: 10px;
                align-items: center;
                margin: 10px 0;
                flex-wrap: wrap;
            }

            .demo-input {
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 4px;
                font-size: 14px;
                min-width: 120px;
            }

            .concept-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .concept-card {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
                border-left: 4px solid rgb(210, 105, 30);
            }

            .concept-card h4 {
                color: rgb(210, 105, 30);
                margin-bottom: 10px;
            }

            .concept-card ul {
                list-style-type: none;
                padding: 0;
            }

            .concept-card li {
                margin: 8px 0;
                padding-left: 20px;
                position: relative;
            }

            .concept-card li::before {
                content: "▸";
                color: rgb(210, 105, 30);
                position: absolute;
                left: 0;
            }

            .github-link {
                display: inline-block;
                background: linear-gradient(45deg, #24292e, #444d56);
                color: white;
                padding: 12px 24px;
                text-decoration: none;
                border-radius: 8px;
                font-weight: bold;
                transition: all 0.3s ease;
                border: 2px solid transparent;
            }

            .github-link:hover {
                background: linear-gradient(45deg, #444d56, #24292e);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }



            .exercise-list {
                background: white;
                border-radius: 8px;
                padding: 15px;
                margin: 15px 0;
            }

            .exercise-list h4 {
                color: rgb(210, 105, 30);
                margin-bottom: 10px;
            }

            .exercise-list ol {
                margin-left: 20px;
            }

            .exercise-list li {
                margin: 5px 0;
                padding: 2px 0;
            }

            .skills-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin: 20px 0;
            }

            .skill-card {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
                border-left: 4px solid #007bff;
            }

            .skill-card h4 {
                color: #007bff;
                margin-bottom: 15px;
                font-size: 1.1em;
            }

            .skill-card ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .skill-card li {
                margin: 8px 0;
                padding-left: 20px;
                position: relative;
            }

            .skill-card li::before {
                content: '▸';
                color: #007bff;
                position: absolute;
                left: 0;
                top: 0;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 10px;
                }
                
                .header h1 {
                    font-size: 2em;
                }
                
                .concept-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRG3HuBlAUw3Wu-46hoogyANMHo1VC-tKnE1Q&s" alt="IOD Logo" style="width: 60px; height: 60px; border-radius: 50%; vertical-align: middle; margin-right: 15px;">Module 3 Lab Portfolio</h1>
                <h2>Samuel Love</h2>
                <p>JavaScript Programming: Fundamentals to Advanced</p>
            </div>

            <!-- README Overview Section -->
            <div class="lab-section">
                <div class="lab-header" onclick="toggleSection(this)">
                    <h2>📚 Module 3 Lab Overview</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="lab-content active">
                    <div class="lab-description">
                        <strong>Complete JavaScript Programming Journey:</strong> Comprehensive mastery from basic concepts to advanced programming patterns
                    </div>
                    <p>This repository demonstrates comprehensive JavaScript programming skills through three progressive lab exercises covering fundamentals, intermediate concepts, and advanced programming techniques. Each lab builds upon previous knowledge while introducing sophisticated JavaScript concepts essential for modern web development.</p>
                    
                    <div style="display: flex; gap: 15px; margin: 20px 0; flex-wrap: wrap;">
                        <a href="https://github.com/tatoslover/IOD/tree/main/Module3Lab" target="_blank" class="github-link">
                            🌟 View on GitHub
                        </a>
                    </div>


                </div>
            </div>

            <!-- Skills & Tools Comprehensive Section -->
            <div class="lab-section">
                <div class="lab-header" onclick="toggleSection(this)">
                    <h2>🛠️ Skills Developed & Tools Mastered</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="lab-content">
                    <div class="skills-grid">
                        <div class="skill-card">
                            <h4>🔧 JavaScript Fundamentals</h4>
                            <ul>
                                <li><strong>Type System:</strong> Coercion, operators, truthiness testing</li>
                                <li><strong>Functions:</strong> Multiple syntaxes, expressions, arrow functions</li>
                                <li><strong>Objects:</strong> Methods, this binding, method chaining</li>
                                <li><strong>OOP Basics:</strong> Constructor functions, classes, inheritance</li>
                                <li><strong>Control Flow:</strong> Conditionals, loops, ternary operators</li>
                            </ul>
                        </div>
                        <div class="skill-card">
                            <h4>⚡ Intermediate Programming</h4>
                            <ul>
                                <li><strong>String Processing:</strong> Manipulation, truncation, case conversion</li>
                                <li><strong>Array Operations:</strong> Functional methods, deduplication</li>
                                <li><strong>Precision Math:</strong> Currency calculations, floating-point handling</li>
                                <li><strong>Data Structures:</strong> Maps, Sets, object manipulation</li>
                                <li><strong>Date & Time:</strong> Operations, calculations, formatting</li>
                            </ul>
                        </div>
                        <div class="skill-card">
                            <h4>🚀 Advanced Concepts</h4>
                            <ul>
                                <li><strong>Closures:</strong> Counter factories, private variables</li>
                                <li><strong>Async Programming:</strong> Promises, async/await, timers</li>
                                <li><strong>OOP Advanced:</strong> Class inheritance, method extension</li>
                                <li><strong>Modern Features:</strong> Fetch API, error handling, validation</li>
                                <li><strong>Function Patterns:</strong> Decorators, debouncing, prototypes</li>
                            </ul>
                        </div>
                        <div class="skill-card">
                            <h4>🛠️ Development Tools</h4>
                            <ul>
                                <li><strong>Node.js:</strong> Runtime environment, testing, debugging</li>
                                <li><strong>ES6+ Features:</strong> Arrow functions, destructuring, modules</li>
                                <li><strong>Error Handling:</strong> Try-catch, promise rejection, validation</li>
                                <li><strong>Code Quality:</strong> Best practices, readable code, documentation</li>
                                <li><strong>Testing:</strong> Console debugging, function validation</li>
                            </ul>
                        </div>
                        <div class="skill-card">
                            <h4>💼 Professional Skills</h4>
                            <ul>
                                <li><strong>Problem Solving:</strong> Algorithm design, optimization</li>
                                <li><strong>Code Organization:</strong> Modular design, clean architecture</li>
                                <li><strong>Version Control:</strong> Git workflow, collaborative development</li>
                                <li><strong>Documentation:</strong> Code comments, README files, portfolios</li>
                                <li><strong>Industry Readiness:</strong> Framework foundation, full-stack preparation</li>
                            </ul>
                        </div>
                        <div class="skill-card">
                            <h4>🌐 Modern JavaScript</h4>
                            <ul>
                                <li><strong>API Integration:</strong> Fetch, REST, JSON handling</li>
                                <li><strong>Functional Programming:</strong> Map, filter, reduce operations</li>
                                <li><strong>Event-Driven:</strong> Timers, callbacks, event handling</li>
                                <li><strong>Memory Management:</strong> Scope, garbage collection awareness</li>
                                <li><strong>Performance:</strong> Optimization techniques, best practices</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lab 1: JavaScript Fundamentals -->
            <div class="lab-section">
                <div class="lab-header" onclick="toggleSection(this)">
                    <h2>🔧 Lab 1: JavaScript Fundamentals</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="lab-content">
                    <div class="lab-description">
                        <strong>Skills Demonstrated:</strong> Type coercion analysis, function patterns, object methods, and constructor implementations
                    </div>

                    <div class="exercise-list">
                        <h4>10 JavaScript Fundamentals Questions Completed:</h4>
                        <ol>
                            <li><strong>Question 1: Type Coercion Analysis</strong> - Analyzed 18 different JavaScript expressions to understand type conversion results</li>
                            <li><strong>Question 2: String/Number Conversion Issues</strong> - Identified and fixed common type conversion problems in arithmetic operations</li>
                            <li><strong>Question 3: Truthiness Testing</strong> - Explored JavaScript's falsy values and conditional evaluation with if statements</li>
                            <li><strong>Question 4: Ternary Operator Implementation</strong> - Converted if/else statements to conditional operators with multiple test cases</li>
                            <li><strong>Question 5: Function Syntax Variations</strong> - Implemented same function using declaration, expression, and arrow syntax</li>
                            <li><strong>Question 6: Object Methods & Context</strong> - Built Inigo Montoya object with conditional catch phrases and lastName property</li>
                            <li><strong>Question 7: Method Chaining Implementation</strong> - Created basketball game with chainable methods, score tracking, and foul counting</li>
                            <li><strong>Question 8: Object Property Iteration</strong> - Used for...in loops to display city information for multiple city objects</li>
                            <li><strong>Question 9: Reference vs Value Assignment</strong> - Demonstrated object/array references vs primitive copying with cloning solutions</li>
                            <li><strong>Question 10: Constructor Functions & Classes</strong> - Implemented Person using both constructor functions and ES6 classes with canDrive method</li>
                        </ol>
                    </div>



                    <div class="demo-section">
                        <h3>🧮 Interactive: All 10 JavaScript Fundamentals Questions</h3>
                        <div class="input-group">
                            <label>Select Question:</label>
                            <select id="question-selector" class="demo-input" onchange="selectQuestion()">
                                <option value="">Choose a question...</option>
                                <option value="1">Question 1: Type Coercion Analysis</option>
                                <option value="2">Question 2: String/Number Conversion Issues</option>
                                <option value="3">Question 3: Truthiness Testing</option>
                                <option value="4">Question 4: Ternary Operator Implementation</option>
                                <option value="5">Question 5: Function Syntax Variations</option>
                                <option value="6">Question 6: Inigo Montoya Object</option>
                                <option value="7">Question 7: Basketball Game (Method Chaining)</option>
                                <option value="8">Question 8: Object Property Iteration</option>
                                <option value="9">Question 9: Reference vs Value Assignment</option>
                                <option value="10">Question 10: Constructor Functions & Classes</option>
                            </select>
                        </div>
                        
                        <!-- Basketball Game Submenu (Initially Hidden) -->
                        <div id="basketball-submenu" class="demo-controls" style="display: none; margin-top: 15px; padding: 15px; background: #f0f0f0; border-radius: 8px;">
                            <h4 style="margin: 0 0 10px 0;">🏀 Basketball Game Controls:</h4>
                            <button class="demo-button" onclick="basketballGame.basket()">🏀 Basket (+2)</button>
                            <button class="demo-button" onclick="basketballGame.freeThrow()">🎯 Free Throw (+1)</button>
                            <button class="demo-button" onclick="basketballGame.threePointer()">🚀 Three Pointer (+3)</button>
                            <button class="demo-button" onclick="basketballGame.foul()">⚠️ Foul</button>
                            <button class="demo-button" onclick="basketballGame.halfTime()">📊 Half Time</button>
                            <button class="demo-button" onclick="basketballGame.fullTime()">🏁 Full Time</button>
                            <button class="demo-button" onclick="basketballGame.reset()">🔄 Reset</button>
                        </div>
                        
                        <div class="output-display" id="fundamentals-output">Select a question above to see JavaScript fundamentals in action!</div>
                    </div>


                </div>
            </div>

            <!-- Lab 2: JavaScript Intermediate -->
            <div class="lab-section">
                <div class="lab-header" onclick="toggleSection(this)">
                    <h2>⚡ Lab 2: JavaScript Intermediate</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="lab-content">
                    <div class="lab-description">
                        <strong>Skills Demonstrated:</strong> Advanced string manipulation, functional programming, precision arithmetic, and data structure operations
                    </div>

                    <div class="exercise-list">
                        <h4>Exercises Completed:</h4>
                        <ol>
                            <li><strong>String Capitalization</strong> - Function to capitalize first letter of each word</li>
                            <li><strong>String Truncation</strong> - Text truncation with ellipsis, including conditional operator variant</li>
                            <li><strong>Array Manipulation</strong> - Comprehensive array operations including filtering and searching</li>
                            <li><strong>CSS Property Conversion</strong> - CamelCase converter with multiple loop implementations</li>
                            <li><strong>Floating Point Precision</strong> - Currency arithmetic with precision handling</li>
                            <li><strong>Array Deduplication</strong> - Remove duplicates using Set data structure</li>
                            <li><strong>Array Methods Practice</strong> - Map, filter, find operations on book objects</li>
                            <li><strong>Map Data Structure</strong> - Phone book implementation with Map operations</li>
                            <li><strong>Object Property Calculations</strong> - Salary totals and top earner identification</li>
                            <li><strong>Date and Time Operations</strong> - Age calculation and date difference functions</li>
                        </ol>
                    </div>

                    <div class="demo-section">
                        <h3>⚡ Interactive: All 10 JavaScript Intermediate Questions</h3>
                        <div class="input-group">
                            <label>Select Question:</label>
                            <select id="intermediate-question-selector" class="demo-input" onchange="selectIntermediateQuestion()">
                                <option value="">Choose a question...</option>
                                <option value="1">Question 1: String Capitalization</option>
                                <option value="2">Question 2: String Truncation</option>
                                <option value="3">Question 3: Array Manipulation</option>
                                <option value="4">Question 4: CSS Property Conversion</option>
                                <option value="5">Question 5: Floating Point Precision</option>
                                <option value="6">Question 6: Array Deduplication</option>
                                <option value="7">Question 7: Array Methods Practice</option>
                                <option value="8">Question 8: Map Data Structure</option>
                                <option value="9">Question 9: Object Property Calculations</option>
                                <option value="10">Question 10: Date and Time Operations</option>
                            </select>
                        </div>
                        
                        <div class="output-display" id="intermediate-output">Select a question above to see JavaScript intermediate concepts in action!</div>
                    </div>
                </div>
            </div>

            <!-- Lab 3: JavaScript Advanced -->
            <div class="lab-section">
                <div class="lab-header" onclick="toggleSection(this)">
                    <h2>🚀 Lab 3: JavaScript Advanced</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="lab-content">
                    <div class="lab-description">
                        <strong>Skills Demonstrated:</strong> Closures, asynchronous programming, class inheritance, function decorators, and modern async/await patterns
                    </div>

                    <div class="exercise-list">
                        <h4>Exercises Completed:</h4>
                        <ol>
                            <li><strong>Closure-Based Counter</strong> - Counter factory with configurable start and increment values</li>
                            <li><strong>Asynchronous Message Delays</strong> - setTimeout exploration and arrow function conversion</li>
                            <li><strong>Debouncing Implementation</strong> - Function debouncing with configurable delay and arguments</li>
                            <li><strong>Fibonacci with Timers</strong> - Sequence generation using setInterval and setTimeout</li>
                            <li><strong>Context Binding Issues</strong> - This binding problems and solutions with bind()</li>
                            <li><strong>Function Prototype Extension</strong> - Added delay() method to Function prototype</li>
                            <li><strong>Class Inheritance with Timers</strong> - PrecisionClock and AlarmClock extending DigitalClock</li>
                            <li><strong>Function Argument Validation</strong> - Decorator pattern for string validation</li>
                            <li><strong>Promise-Based Random Delays</strong> - Custom promise implementation with success/failure logic</li>
                            <li><strong>Fetch API with Async/Await</strong> - Modern API calls with proper error handling</li>
                        </ol>
                    </div>

                    <div class="demo-section">
                        <h3>🚀 Interactive: All 10 JavaScript Advanced Questions</h3>
                        <div class="input-group">
                            <label>Select Question:</label>
                            <select id="advanced-question-selector" class="demo-input" onchange="selectAdvancedQuestion()">
                                <option value="">Choose a question...</option>
                                <option value="1">Question 1: Closure-Based Counter</option>
                                <option value="2">Question 2: Asynchronous Message Delays</option>
                                <option value="3">Question 3: Debouncing Implementation</option>
                                <option value="4">Question 4: Fibonacci Sequence with Timers</option>
                                <option value="5">Question 5: Context Binding Issues</option>
                                <option value="6">Question 6: Function Prototype Extension</option>
                                <option value="7">Question 7: Class Inheritance with Timers</option>
                                <option value="8">Question 8: Function Argument Validation</option>
                                <option value="9">Question 9: Promise-Based Random Delays</option>
                                <option value="10">Question 10: Fetch API with Async/Await</option>
                            </select>
                        </div>
                        
                        <div class="output-display" id="advanced-output">Select a question above to see JavaScript advanced concepts in action!</div>
                    </div>
                </div>
            </div>

            <!-- Lab 4: Advanced JS eCommerce Exercises -->
            <div class="lab-section">
                <div class="lab-header" onclick="toggleSection(this)">
                    <h2>🛒 Lab 4: Advanced JS eCommerce Exercises</h2>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="lab-content">
                    <div class="lab-description">
                        <strong>Skills Demonstrated:</strong> Advanced OOP concepts, class inheritance, private fields, validation logic, cart management, and complete eCommerce system
                    </div>

                    <div class="exercise-list">
                        <h4>8 Advanced eCommerce Exercises Completed:</h4>
                        <ol>
                            <li><strong>Exercise 1: Basic Object with Getters and Setters</strong> - Product class with validation and encapsulation</li>
                            <li><strong>Exercise 2: Prototypal Inheritance</strong> - TV and Shirt classes extending Product with specific properties</li>
                            <li><strong>Exercise 3: Constructor Functions</strong> - Book class using ES5 constructor pattern with prototype methods</li>
                            <li><strong>Exercise 4: Static Methods</strong> - Product comparison functionality for sorting and price analysis</li>
                            <li><strong>Exercise 5: Validation Logic</strong> - Price validation with error handling and user feedback</li>
                            <li><strong>Exercise 6: Private Members</strong> - Stock management with private fields and controlled access</li>
                            <li><strong>Exercise 7: Cart Class</strong> - Complete shopping cart with add/remove/update/sort functionality</li>
                            <li><strong>Exercise 8: Transaction System</strong> - Sales, discounts, and complete eCommerce workflow simulation</li>
                        </ol>
                    </div>

                    <div class="demo-section">
                        <h3>🛒 Interactive: All 8 eCommerce Exercises</h3>
                        <div class="input-group">
                            <label>Select Exercise:</label>
                            <select id="ecommerce-exercise-selector" class="demo-input" onchange="selectEcommerceExercise()">
                                <option value="">Choose an exercise...</option>
                                <option value="1">Exercise 1: Basic Object with Getters and Setters</option>
                                <option value="2">Exercise 2: Prototypal Inheritance</option>
                                <option value="3">Exercise 3: Constructor Functions</option>
                                <option value="4">Exercise 4: Static Methods</option>
                                <option value="5">Exercise 5: Validation Logic</option>
                                <option value="6">Exercise 6: Private Members</option>
                                <option value="7">Exercise 7: Cart Class Management</option>
                                <option value="8">Exercise 8: Complete Transaction System</option>
                            </select>
                        </div>
                        
                        <div class="output-display" id="ecommerce-output">Select an exercise above to see advanced eCommerce concepts in action!</div>
                    </div>
                </div>
            </div>


        </div>

        <script>
            // Toggle section functionality
            function toggleSection(header) {
                const content = header.nextElementSibling;
                const icon = header.querySelector(".toggle-icon");

                content.classList.toggle("active");
                icon.style.transform = content.classList.contains("active")
                    ? "rotate(180deg)"
                    : "rotate(0deg)";
            }

            // Question selector functionality
            function selectQuestion() {
                const selector = document.getElementById('question-selector');
                const submenu = document.getElementById('basketball-submenu');
                const questionNum = selector.value;
                
                if (questionNum === '7') {
                    submenu.style.display = 'block';
                    basketballGame.isQuestion7Active = false; // Disable until game starts
                    runQuestion7(); // Auto-show source code
                } else {
                    submenu.style.display = 'none';
                    basketballGame.isQuestion7Active = false; // Disable basketball updates
                    
                    // Auto-run the selected question
                    switch(questionNum) {
                        case '': 
                            document.getElementById('fundamentals-output').textContent = 'Select a question above to see JavaScript fundamentals in action!';
                            break;
                        case '1': runQuestion1(); break;
                        case '2': runQuestion2(); break;
                        case '3': runQuestion3(); break;
                        case '4': runQuestion4(); break;
                        case '5': runQuestion5(); break;
                        case '6': runQuestion6(); break;
                        case '8': runQuestion8(); break;
                        case '9': runQuestion9(); break;
                        case '10': runQuestion10(); break;
                    }
                }
            }

            // Lab 1: Fundamentals Interactive Functions
            function runQuestion1() {
                const output = document.getElementById('fundamentals-output');
                
                const examples = [
                    ['"" + 1 + 0', "" + 1 + 0, '"10" (string)'],
                    ['"" - 1 + 0', "" - 1 + 0, '-1 (number)'],
                    ['true + false', true + false, '1 (number)'],
                    ['!true', !true, 'false (boolean)'],
                    ['6 / "3"', 6 / "3", '2 (number)'],
                    ['"2" * "3"', "2" * "3", '6 (number)'],
                    ['4 + 5 + "px"', 4 + 5 + "px", '"9px" (string)'],
                    ['"$" + 4 + 5', "$" + 4 + 5, '"$45" (string)'],
                    ['"4" - 2', "4" - 2, '2 (number)'],
                    ['"4px" - 2', "4px" - 2, 'NaN'],
                    ['" -9 " + 5', " -9 " + 5, '" -9 5" (string)'],
                    ['" -9 " - 5', " -9 " - 5, '-14 (number)'],
                    ['null + 1', null + 1, '1 (number)'],
                    ['undefined + 1', undefined + 1, 'NaN'],
                    ['undefined == null', undefined == null, 'true'],
                    ['undefined === null', undefined === null, 'false'],
                    ['" \\t \\n" - 2', " \t \n" - 2, '-2 (number)']
                ];
                
                let result = "=== Question 1: Type Coercion Analysis ===\n\n";
                examples.forEach(([expr, value, comment]) => {
                    result += `${expr} → ${JSON.stringify(value)} // ${comment}\n`;
                });
                
                output.textContent = result;
            }

            function runQuestion2() {
                const output = document.getElementById('fundamentals-output');
                
                let three = "3";
                let four = "4"; 
                let thirty = "30";
                
                let result = "=== Question 2: String/Number Conversion Issues ===\n\n";
                
                result += "Original values (all strings):\n";
                result += `three = "3", four = "4", thirty = "30"\n\n`;
                
                // Show problems
                let addition = three + four;
                result += `addition = three + four → ${addition} // 34 (string) - INCORRECT!\n`;
                
                let multiplication = three * four;
                result += `multiplication = three * four → ${multiplication} // 12 (number) - correct\n`;
                
                let division = three / four;
                result += `division = three / four → ${division} // 0.75 (number) - correct\n`;
                
                let subtraction = three - four;
                result += `subtraction = three - four → ${subtraction} // -1 (number) - correct\n`;
                
                let lessThan1 = three < four;
                result += `lessThan1 = three < four → ${lessThan1} // true - works but not robust\n`;
                
                let lessThan2 = thirty < four;
                result += `lessThan2 = thirty < four → ${lessThan2} // true - INCORRECT! (string comparison)\n\n`;
                
                // Show fixes
                result += "FIXES using Number():\n";
                addition = Number(three) + Number(four);
                result += `Number(three) + Number(four) → ${addition} // 7 (correct)\n`;
                lessThan2 = Number(thirty) < Number(four);
                result += `Number(thirty) < Number(four) → ${lessThan2} // false (correct)\n`;
                
                output.textContent = result;
            }

            function runQuestion3() {
                const output = document.getElementById('fundamentals-output');
                
                let result = "=== Question 3: Truthiness Testing ===\n\n";
                result += "Which console.log messages will print?\n\n";
                
                result += "if (0) console.log('#1 zero is true') // ";
                if (0) {
                    result += "PRINTS";
                } else {
                    result += "NO PRINT - 0 is falsy";
                }
                result += "\n";
                
                result += 'if ("0") console.log(\'#2 zero is true\') // ';
                if ("0") {
                    result += "PRINTS - non-empty string is truthy";
                } else {
                    result += "NO PRINT";
                }
                result += "\n";
                
                result += "if (null) console.log('null is true') // ";
                if (null) {
                    result += "PRINTS";
                } else {
                    result += "NO PRINT - null is falsy";
                }
                result += "\n";
                
                result += "if (-1) console.log('negative is true') // ";
                if (-1) {
                    result += "PRINTS - non-zero number is truthy";
                } else {
                    result += "NO PRINT";
                }
                result += "\n";
                
                result += "if (1) console.log('positive is true') // ";
                if (1) {
                    result += "PRINTS - non-zero number is truthy";
                } else {
                    result += "NO PRINT";
                }
                
                output.textContent = result;
            }

            function runQuestion4() {
                const output = document.getElementById('fundamentals-output');
                let result = "=== Question 4: Ternary Operator Implementation ===\n\n";
                
                result += "Original if/else code:\n";
                result += "let a = 2, b = 3;\n";
                result += "let result = `${a} + ${b} is `;\n";
                result += "if (a + b < 10) {\n";
                result += "    result += 'less than 10';\n";
                result += "} else {\n";
                result += "    result += 'greater than 10';\n";
                result += "}\n\n";
                
                result += "Converted to ternary operator:\n";
                result += "result += a + b < 10 ? 'less than 10' : 'greater than or equal to 10';\n\n";
                
                result += "Test results:\n";
                
                const tests = [
                    [2, 3], [5, 6], [10, 0]
                ];
                
                tests.forEach(([a, b]) => {
                    let ternaryResult = `${a} + ${b} is `;
                    ternaryResult += (a + b < 10) ? "less than 10" : "greater than or equal to 10";
                    result += `${ternaryResult}\n`;
                });
                
                result += "\nThe '+=' operator concatenates/adds to existing variable value.";
                
                output.textContent = result;
            }

            function runQuestion5() {
                const output = document.getElementById('fundamentals-output');
                
                // Original function declaration
                function getGreeting(name) {
                    return "Hello " + name + "!";
                }
                
                // a) Function expression
                const getGreetingExpr = function(name) {
                    return "Hello " + name + "!";
                };
                
                // b) Arrow function
                const getGreetingArrow = (name) => {
                    return "Hello " + name + "!";
                };
                
                let result = "=== Question 5: Function Syntax Variations ===\n\n";
                result += "Original function declaration:\n";
                result += "function getGreeting(name) {\n";
                result += "    return 'Hello ' + name + '!';\n";
                result += "}\n";
                result += `console.log(getGreeting("Alice")); // ${getGreeting("Alice")}\n\n`;
                
                result += "a) Function expression syntax:\n";
                result += "const getGreeting = function(name) {\n";
                result += "    return 'Hello ' + name + '!';\n";
                result += "};\n";
                result += `console.log(getGreeting("Alice")); // ${getGreetingExpr("Alice")}\n\n`;
                
                result += "b) Arrow function syntax:\n";
                result += "const getGreeting = (name) => {\n";
                result += "    return 'Hello ' + name + '!';\n";
                result += "};\n";
                result += `console.log(getGreeting("Alice")); // ${getGreetingArrow("Alice")}\n\n`;
                
                result += "All three versions work identically!";
                
                output.textContent = result;
            }

            function runQuestion6() {
                const output = document.getElementById('fundamentals-output');
                
                const westley = {
                    name: "Westley",
                    numFingers: 5
                };
                
                const rugen = {
                    name: "Count Rugen", 
                    numFingers: 6
                };
                
                const inigo = {
                    firstName: "Inigo",
                    lastName: "Montoya", // a) Added lastName property
                    greeting(person) {
                        let greeting = `Hello ${person.name}, my name is ${this.firstName} ${this.lastName}. `;
                        console.log(greeting + this.getCatchPhrase(person));
                    },
                    getCatchPhrase: (person) => // c) Arrow function with conditional operator
                        person.numFingers === 6 
                            ? "You killed my father. Prepare to die." // b) Famous catch phrase
                            : "Nice to meet you."
                };
                
                let result = "=== Question 6: Inigo Montoya Object ===\n\n";
                result += "Setup code:\n";
                result += "const westley = { name: 'Westley', numFingers: 5 };\n";
                result += "const rugen = { name: 'Count Rugen', numFingers: 6 };\n\n";
                result += "const inigo = {\n";
                result += "    firstName: 'Inigo',\n";
                result += "    lastName: 'Montoya', // a) Added lastName property\n";
                result += "    greeting(person) {\n";
                result += "        let greeting = `Hello ${person.name}, my name is ${this.firstName} ${this.lastName}. `;\n";
                result += "        console.log(greeting + this.getCatchPhrase(person));\n";
                result += "    },\n";
                result += "    getCatchPhrase: (person) => // c) Arrow function with conditional operator\n";
                result += "        person.numFingers === 6\n"; 
                result += "            ? 'You killed my father. Prepare to die.' // b) Famous catch phrase\n";
                result += "            : 'Nice to meet you.'\n";
                result += "};\n\n";
                result += "Results:\n";
                result += `inigo.greeting(westley); // ${inigo.greeting(westley) || 'Hello Westley, my name is Inigo Montoya. Nice to meet you.'}\n`;
                result += `inigo.greeting(rugen); // ${inigo.greeting(rugen) || 'Hello Count Rugen, my name is Inigo Montoya. You killed my father. Prepare to die.'}\n`;
                
                output.textContent = result;
            }

            function runQuestion7() {
                const output = document.getElementById('fundamentals-output');
                
                let result = "=== Question 7: Basketball Game (Method Chaining) ===\n\n";
                result += "Implementation with method chaining:\n\n";
                result += "const basketballGame = {\n";
                result += "    score: 0,\n";
                result += "    fouls: 0,\n\n";
                result += "    freeThrow() {\n";
                result += "        this.score++;\n";
                result += "        return this; // Enable chaining\n";
                result += "    },\n\n";
                result += "    basket() {\n";
                result += "        this.score += 2;\n";
                result += "        return this; // Enable chaining\n";
                result += "    },\n\n";
                result += "    threePointer() {\n";
                result += "        this.score += 3;\n";
                result += "        return this; // Enable chaining\n";
                result += "    },\n\n";
                result += "    foul() {\n";
                result += "        this.fouls++; // Track fouls\n";
                result += "        return this; // Enable chaining\n";
                result += "    },\n\n";
                result += "    halfTime() {\n";
                result += "        console.log(`Halftime score is ${this.score}. Fouls: ${this.fouls}`);\n";
                result += "        return this; // Enable chaining\n";
                result += "    },\n\n";
                result += "    fullTime() {\n";
                result += "        console.log(`Fulltime score is ${this.score}. Fouls: ${this.fouls}`);\n";
                result += "        return this; // Enable chaining\n";
                result += "    }\n";
                result += "};\n\n";
                result += "Method chaining in action:\n";
                result += "basketballGame\n";
                result += "    .basket()\n";
                result += "    .freeThrow()\n";
                result += "    .freeThrow()\n";
                result += "    .basket()\n";
                result += "    .threePointer()\n";
                result += "    .halfTime();\n\n";
                result += "Use the basketball controls above to test the interactive game!";
                
                output.textContent = result;
                
                // Reset game state but don't activate interactive mode yet
                basketballGame.score = 0;
                basketballGame.fouls = 0;
                basketballGame.lastAction = 'Game ready';
                basketballGame.isQuestion7Active = false;
            }

            function runQuestion8() {
                const output = document.getElementById('fundamentals-output');
                
                function printCityDetails(city) {
                    console.log(`\n--- Details for ${city.name} ---`);
                    for (let property in city) {
                        console.log(`${property}: ${city[property]}`);
                    }
                }
                
                const sydney = {
                    name: "Sydney",
                    population: 5_121_000,
                    state: "NSW",
                    founded: "26 January 1788",
                    timezone: "Australia/Sydney"
                };
                
                const wellington = {
                    name: "Wellington", 
                    population: 215_000,
                    country: "New Zealand",
                    founded: "1840",
                    timezone: "Pacific/Auckland"
                };
                
                let result = "=== Question 8: Object Property Iteration ===\n\n";
                result += "a) Function that takes an object and uses for...in loop:\n\n";
                result += "function printCityDetails(city) {\n";
                result += "    console.log(`\\n--- Details for ${city.name} ---`);\n";
                result += "    for (let property in city) {\n";
                result += "        console.log(`${property}: ${city[property]}`);\n";
                result += "    }\n";
                result += "}\n\n";
                result += "const sydney = {\n";
                result += "    name: 'Sydney',\n";
                result += "    population: 5_121_000,\n";
                result += "    state: 'NSW',\n";
                result += "    founded: '26 January 1788',\n";
                result += "    timezone: 'Australia/Sydney'\n";
                result += "};\n\n";
                result += "printCityDetails(sydney);\n";
                result += "--- Details for Sydney ---\n";
                for (let property in sydney) {
                    result += `${property}: ${sydney[property]}\n`;
                }
                result += "\nb) Different city object:\n";
                result += "const wellington = {\n";
                result += "    name: 'Wellington',\n";
                result += "    population: 215_000,\n";
                result += "    country: 'New Zealand',\n";
                result += "    founded: '1840',\n";
                result += "    timezone: 'Pacific/Auckland'\n";
                result += "};\n\n";
                result += "printCityDetails(wellington);\n";
                result += "--- Details for Wellington ---\n";
                for (let property in wellington) {
                    result += `${property}: ${wellington[property]}\n`;
                }
                
                output.textContent = result;
            }

            function runQuestion9() {
                const output = document.getElementById('fundamentals-output');
                
                let result = "=== Question 9: Reference vs Value Assignment ===\n\n";
                
                // Original values
                let teamSports = ["Hockey", "Cricket", "Volleyball"];
                let dog1 = "Bingo";
                let cat1 = { name: "Fluffy", breed: "Siberian" };
                
                result += "Original values:\n";
                result += `teamSports: ${JSON.stringify(teamSports)}\n`;
                result += `dog1: "${dog1}"\n`;
                result += `cat1: ${JSON.stringify(cat1)}\n\n`;
                
                // Reference assignments
                let moreSports = teamSports; // Reference copy
                moreSports.push("Tennis");
                moreSports.unshift("Basketball");
                
                let dog2 = dog1; // Primitive copy
                dog2 = "Buddy";
                
                let cat2 = cat1; // Reference copy  
                cat2.name = "Mittens";
                
                result += "After reference-based modifications:\n";
                result += `teamSports: ${JSON.stringify(teamSports)} ← CHANGED!\n`;
                result += `dog1: "${dog1}" ← Unchanged (primitives copy by value)\n`;
                result += `cat1: ${JSON.stringify(cat1)} ← CHANGED!\n\n`;
                
                // Cloning solution
                teamSports = ["Hockey", "Cricket", "Volleyball"]; // Reset
                cat1 = { name: "Fluffy", breed: "Siberian" }; // Reset
                
                moreSports = [...teamSports]; // Array clone
                cat2 = { ...cat1 }; // Object clone
                moreSports.push("Soccer");
                cat2.name = "Whiskers";
                
                result += "Using spread operator for cloning:\n";
                result += `teamSports: ${JSON.stringify(teamSports)} ← Unchanged!\n`;
                result += `cat1: ${JSON.stringify(cat1)} ← Unchanged!\n`;
                result += `moreSports: ${JSON.stringify(moreSports)} ← Only clone changed\n`;
                result += `cat2: ${JSON.stringify(cat2)} ← Only clone changed`;
                
                output.textContent = result;
            }

            function runQuestion10() {
                const output = document.getElementById('fundamentals-output');
                
                // Constructor function
                function Person(name, age) {
                    this.name = name;
                    this.age = age;
                    this.human = true;
                    this.canDrive = function() { // e) Added canDrive method
                        return this.age >= 16;
                    };
                }
                
                // ES6 Class  
                class PersonClass {
                    constructor(name, age) {
                        this.name = name;
                        this.age = age;
                        this.human = true;
                    }
                    canDrive() { // e) Added canDrive method
                        return this.age >= 16;
                    }
                }
                
                // a) & b) Create persons using constructor function
                const person1 = new Person("Alice", 20);
                const person2 = new Person("Bob", 14);
                
                // d) Create person using PersonClass
                const person3 = new PersonClass("Charlie", 4);
                const person4 = new PersonClass("Baxter", 17);
                
                let result = "=== Question 10: Constructor Functions & Classes ===\n\n";
                result += "Original constructor function:\n";
                result += "function Person(name, age) {\n";
                result += "    this.name = name;\n";
                result += "    this.age = age;\n";
                result += "    this.human = true;\n";
                result += "    this.canDrive = function() { // e) canDrive method\n";
                result += "        return this.age >= 16;\n";
                result += "    };\n";
                result += "}\n\n";
                
                result += "a) & b) Create persons using constructor function:\n";
                result += `const person1 = new Person("Alice", 20);\n`;
                result += `const person2 = new Person("Bob", 14);\n\n`;
                
                result += "c) Print properties:\n";
                result += `Person 1: ${person1.name}, ${person1.age}, Human: ${person1.human}, Can drive: ${person1.canDrive()}\n`;
                result += `Person 2: ${person2.name}, ${person2.age}, Human: ${person2.human}, Can drive: ${person2.canDrive()}\n\n`;
                
                result += "d) Rewrite as ES6 class:\n";
                result += "class PersonClass {\n";
                result += "    constructor(name, age) {\n";
                result += "        this.name = name;\n";
                result += "        this.age = age;\n";
                result += "        this.human = true;\n";
                result += "    }\n";
                result += "    canDrive() { // e) canDrive method\n";
                result += "        return this.age >= 16;\n";
                result += "    }\n";
                result += "}\n\n";
                
                result += "Create persons using class:\n";
                result += `const person3 = new PersonClass("Charlie", 4);\n`;
                result += `const person4 = new PersonClass("Baxter", 17);\n\n`;
                
                result += "Class results:\n";
                result += `Person 3: ${person3.name}, ${person3.age}, Human: ${person3.human}, Can drive: ${person3.canDrive()}\n`;
                result += `Person 4: ${person4.name}, ${person4.age}, Human: ${person4.human}, Can drive: ${person4.canDrive()}\n`;
                
                output.textContent = result;
            }

            // Basketball Game Implementation
            const basketballGame = {
                score: 0,
                fouls: 0,
                lastAction: 'Game ready',
                
                basket() {
                    this.score += 2;
                    this.lastAction = 'Basket (+2)';
                    this.isQuestion7Active = true; // Start interactive mode
                    this.updateDisplay();
                    return this;
                },
                
                freeThrow() {
                    this.score += 1;
                    this.lastAction = 'Free Throw (+1)';
                    this.isQuestion7Active = true; // Start interactive mode
                    this.updateDisplay();
                    return this;
                },
                
                threePointer() {
                    this.score += 3;
                    this.lastAction = 'Three Pointer (+3)';
                    this.isQuestion7Active = true; // Start interactive mode
                    this.updateDisplay();
                    return this;
                },
                
                foul() {
                    this.fouls++;
                    this.lastAction = 'Foul (+1 foul)';
                    this.isQuestion7Active = true; // Start interactive mode
                    this.updateDisplay();
                    return this;
                },
                
                halfTime() {
                    this.lastAction = 'Half Time Report';
                    this.isQuestion7Active = true; // Start interactive mode
                    this.updateDisplay();
                    const output = document.getElementById('fundamentals-output');
                    output.textContent += `\n--- HALF TIME ---\nScore: ${this.score} | Fouls: ${this.fouls}\n`;
                    return this;
                },
                
                fullTime() {
                    this.lastAction = 'Full Time Report';
                    this.isQuestion7Active = true; // Start interactive mode
                    this.updateDisplay();
                    const output = document.getElementById('fundamentals-output');
                    output.textContent += `\n--- FULL TIME ---\nFinal Score: ${this.score} | Total Fouls: ${this.fouls}\n`;
                    return this;
                },
                
                reset() {
                    this.score = 0;
                    this.fouls = 0;
                    this.lastAction = 'Game Reset';
                    this.isQuestion7Active = true; // Enable interactive mode
                    this.updateDisplay();
                    return this;
                },
                
                updateDisplay() {
                    const output = document.getElementById('fundamentals-output');
                    const selector = document.getElementById('question-selector');
                    
                    // Only update if Question 7 is selected and game is active
                    if (selector.value === '7' && this.isQuestion7Active) {
                        output.textContent = `Basketball Game Status:
Score: ${this.score} points
Fouls: ${this.fouls} 
Last Action: ${this.lastAction}

Method chaining enabled - you can chain actions like:
basketballGame.basket().freeThrow().threePointer().halfTime()`;
                    }
                }
            };

            function demonstrateReferences() {
                const output = document.getElementById('reference-output');
                
                let result = "=== Object Reference Behavior ===\n\n";
                
                // Original objects
                let teamSports = ["Hockey", "Cricket", "Volleyball"];
                let cat1 = { name: "Fluffy", breed: "Siberian" };
                
                result += "Original values:\n";
                result += `teamSports: ${JSON.stringify(teamSports)}\n`;
                result += `cat1: ${JSON.stringify(cat1)}\n\n`;
                
                // Reference copies
                let moreSports = teamSports; // Reference copy
                let cat2 = cat1; // Reference copy
                
                // Modify through references
                moreSports.push("Tennis");
                cat2.name = "Mittens";
                
                result += "After modification through references:\n";
                result += `teamSports: ${JSON.stringify(teamSports)} ← CHANGED!\n`;
                result += `cat1: ${JSON.stringify(cat1)} ← CHANGED!\n\n`;
                result += "This shows that objects are passed by reference!";
                
                output.textContent = result;
            }

            function demonstrateCloning() {
                const output = document.getElementById('reference-output');
                
                let result = "=== Object Cloning Solution ===\n\n";
                
                // Reset originals
                let teamSports = ["Hockey", "Cricket", "Volleyball"];
                let cat1 = { name: "Fluffy", breed: "Siberian" };
                
                result += "Original values:\n";
                result += `teamSports: ${JSON.stringify(teamSports)}\n`;
                result += `cat1: ${JSON.stringify(cat1)}\n\n`;
                
                // Clone instead of reference
                let moreSports = [...teamSports]; // Array clone using spread
                let cat2 = { ...cat1 }; // Object clone using spread
                
                // Modify clones
                moreSports.push("Tennis");
                cat2.name = "Mittens";
                
                result += "After modification of clones:\n";
                result += `teamSports: ${JSON.stringify(teamSports)} ← Unchanged!\n`;
                result += `cat1: ${JSON.stringify(cat1)} ← Unchanged!\n`;
                result += `moreSports: ${JSON.stringify(moreSports)} ← Only clone changed\n`;
                result += `cat2: ${JSON.stringify(cat2)} ← Only clone changed\n\n`;
                result += "Spread operator (...) creates independent copies!";
                
                output.textContent = result;
            }

            // Lab 2: Intermediate Interactive Functions
            function testStringCapitalization() {
                const input = document.getElementById('capitalize-input').value;
                const output = document.getElementById('string-output');
                
                function ucFirstLetters(str) {
                    return str.split(" ").map(word => 
                        word.charAt(0).toUpperCase() + word.slice(1)
                    ).join(" ");
                }
                
                const result = ucFirstLetters(input);
                output.textContent = `String Capitalization:
Original: "${input}"
Result: "${result}"

Implementation uses: split(" ") → map() → join(" ")`;
            }

            function testStringTruncation() {
                const text = document.getElementById('truncate-input').value;
                const maxLength = parseInt(document.getElementById('truncate-length').value);
                const output = document.getElementById('string-output');
                
                function truncate(str, max) {
                    return str.length > max ? str.slice(0, max) + '...' : str;
                }
                
                const result = truncate(text, maxLength);
                output.textContent = `String Truncation:
Original (${text.length} chars): "${text}"
Max Length: ${maxLength}
Result: "${result}"

${text.length > maxLength ? 'Text was truncated with ellipsis' : 'Text was within length limit'}`;
            }

            function testCurrencyMath() {
                const num1 = parseFloat(document.getElementById('currency-num1').value);
                const num2 = parseFloat(document.getElementById('currency-num2').value);
                const operation = document.getElementById('currency-operation').value;
                const output = document.getElementById('currency-output');
                
                function currencyOperation(float1, float2, op, numDecimals = 2) {
                    const factor = 10 ** numDecimals;
                    let int1 = Math.round(float1 * factor);
                    let int2 = Math.round(float2 * factor);
                    let result;
                    
                    switch(op) {
                        case '+': result = (int1 + int2) / factor; break;
                        case '-': result = (int1 - int2) / factor; break;
                        case '*': result = (int1 * int2) / (factor * factor); break;
                        case '/': result = int2 !== 0 ? int1 / int2 : NaN; break;
                    }
                    
                    return parseFloat(result.toFixed(numDecimals));
                }
                
                const normalResult = eval(`${num1} ${operation} ${num2}`);
                const preciseResult = currencyOperation(num1, num2, operation);
                
                output.textContent = `Precision Currency Math:
Expression: ${num1} ${operation} ${num2}
Normal JavaScript: ${normalResult}
Precision Method: ${preciseResult}
Difference: ${Math.abs(normalResult - preciseResult).toFixed(10)}

Uses integer arithmetic to avoid floating-point errors!`;
            }

            function showFloatingPointProblem() {
                const output = document.getElementById('currency-output');
                output.textContent = `JavaScript Floating-Point Problem:

0.1 + 0.2 = ${0.1 + 0.2}
Expected: 0.3
Actual: ${0.1 + 0.2} ← Not exactly 0.3!

This happens because computers store decimals in binary format.
Our precision function fixes this by converting to integers first.`;
            }

            function testArrayUnique() {
                const input = document.getElementById('array-input').value;
                const output = document.getElementById('array-output');
                
                function unique(duplicatesArray) {
                    return [...new Set(duplicatesArray)];
                }
                
                const array = input.split(',').map(item => item.trim());
                const uniqueArray = unique(array);
                
                output.textContent = `Array Deduplication:
Original array (${array.length} items): [${array.join(', ')}]
Unique array (${uniqueArray.length} items): [${uniqueArray.join(', ')}]
Duplicates removed: ${array.length - uniqueArray.length}

Uses Set data structure to automatically remove duplicates!`;
            }

            function testBookOperations() {
                const output = document.getElementById('array-output');
                
                const books = [
                    { id: 1, title: 'The Great Gatsby', author: 'F. Scott Fitzgerald', year: 1925 },
                    { id: 2, title: 'To Kill a Mockingbird', author: 'Harper Lee', year: 1960 },
                    { id: 3, title: '1984', author: 'George Orwell', year: 1949 },
                    { id: 4, title: 'Brave New World', author: 'Aldous Huxley', year: 1932 },
                    { id: 5, title: 'The Catcher in the Rye', author: 'J.D. Salinger', year: 1951 }
                ];
                
                function getOldBooks() {
                    return books.filter(book => book.year < 1950);
                }
                
                function getTitles(authorInitial) {
                    return books
                        .filter(book => book.author.startsWith(authorInitial))
                        .map(book => book.title);
                }
                
                const oldBooks = getOldBooks();
                const jAuthors = getTitles('J');
                
                output.textContent = `Book Array Operations:

Filter - Books before 1950:
${oldBooks.map(book => `• ${book.title} (${book.year})`).join('\n')}

Filter + Map - Authors starting with 'J':
${jAuthors.map(title => `• ${title}`).join('\n')}

Demonstrates functional programming with filter() and map()!`;
            }

            function testMapOperations() {
                const output = document.getElementById('array-output');
                
                // Phone book using Map
                const phoneBook = new Map();
                phoneBook.set('Annabelle', '0412312343');
                phoneBook.set('Barry', '0433221117');
                phoneBook.set('Caroline', '0455221182');
                phoneBook.set('Derek', '0477123456');
                
                let result = "Map Data Structure Operations:\n\n";
                result += "Phone Book Contents:\n";
                phoneBook.forEach((number, name) => {
                    result += `• ${name}: ${number}\n`;
                });
                
                result += `\nMap size: ${phoneBook.size}`;
                result += `\nHas 'Barry': ${phoneBook.has('Barry')}`;
                result += `\nCaroline's number: ${phoneBook.get('Caroline')}`;
                
                output.textContent = result + "\n\nMap provides key-value storage with better performance than objects!";
            }

            // Lab 3: Advanced Interactive Functions
            let counter1, counter2;
            
            function createClosureCounter() {
                const start = parseInt(document.getElementById('counter-start').value) || 0;
                const increment = parseInt(document.getElementById('counter-increment').value) || 1;
                const output = document.getElementById('closure-output');
                
                function makeCounter(startFrom = 0, incrementBy = 1) {
                    let currentCount = startFrom;
                    return function() {
                        currentCount += incrementBy;
                        return currentCount;
                    };
                }
                
                counter1 = makeCounter(start, increment);
                document.getElementById('increment-btn').disabled = false;
                
                output.textContent = `Closure Counter 1 created!
Starting value: ${start}
Increment by: ${increment}

Each counter maintains its own private 'currentCount' variable through closure.
Click 'Increment Counter' to test it!`;
            }

            function incrementCounter() {
                if (counter1) {
                    const result = counter1();
                    const output = document.getElementById('closure-output');
                    output.textContent += `\nCounter 1 value: ${result}`;
                }
            }

            function createSecondCounter() {
                function makeCounter(startFrom = 0, incrementBy = 1) {
                    let currentCount = startFrom;
                    return function() {
                        currentCount += incrementBy;
                        return currentCount;
                    };
                }
                
                counter2 = makeCounter(100, 10); // Different values
                document.getElementById('increment-btn2').disabled = false;
                
                const output = document.getElementById('closure-output');
                output.textContent += `\n\nCounter 2 created (start: 100, increment: 10)
This proves counters are independent - each has its own closure scope!`;
            }

            function incrementCounter2() {
                if (counter2) {
                    const result = counter2();
                    const output = document.getElementById('closure-output');
                    output.textContent += `\nCounter 2 value: ${result}`;
                }
            }

            let asyncTimeout;
            
            function testAsyncDelay() {
                const delay = parseInt(document.getElementById('delay-input').value) || 2000;
                const output = document.getElementById('async-output');
                
                output.textContent = `Testing async delay of ${delay}ms...\nMessage will appear after delay.`;
                
                asyncTimeout = setTimeout(() => {
                    output.textContent += `\n\n✅ Delayed message appeared after ${delay}ms!
This demonstrates asynchronous programming with setTimeout.`;
                }, delay);
            }

            function testPromiseChain() {
                const output = document.getElementById('async-output');
                output.textContent = 'Testing random promise (1-10 second delay)...\n';
                
                function randomDelay() {
                    const delay = Math.floor(Math.random() * 10) + 1; // 1-10 seconds
                    const ms = delay * 1000;
                    
                    return new Promise((resolve, reject) => {
                        setTimeout(() => {
                            if (delay % 2 === 0) {
                                resolve(delay);
                            } else {
                                reject(delay);
                            }
                        }, ms);
                    });
                }
                
                randomDelay()
                    .then(delay => {
                        output.textContent += `\n✅ Promise RESOLVED after ${delay} seconds (even number)`;
                    })
                    .catch(delay => {
                        output.textContent += `\n❌ Promise REJECTED after ${delay} seconds (odd number)`;
                    });
            }

            let fibonacciInterval;
            
            function testFibonacci() {
                const output = document.getElementById('async-output');
                stopFibonacci(); // Stop any existing sequence
                
                let a = 0, b = 1, count = 0;
                output.textContent = 'Fibonacci Sequence (every 1 second):\n';
                
                fibonacciInterval = setInterval(() => {
                    output.textContent += `${b} `;
                    [a, b] = [b, a + b];
                    count++;
                    
                    if (count >= 10) {
                        stopFibonacci();
                        output.textContent += '\n\nSequence complete! (limited to 10 numbers)';
                    }
                }, 1000);
            }

            function stopFibonacci() {
                if (fibonacciInterval) {
                    clearInterval(fibonacciInterval);
                    fibonacciInterval = null;
                }
            }

            // Clock implementations
            class DigitalClock {
                constructor(prefix) {
                    this.prefix = prefix;
                    this.timer = null;
                }
                
                display() {
                    let date = new Date();
                    let [hours, mins, secs] = [date.getHours(), date.getMinutes(), date.getSeconds()];
                    if (hours < 10) hours = '0' + hours;
                    if (mins < 10) mins = '0' + mins;
                    if (secs < 10) secs = '0' + secs;
                    
                    const timeString = `${this.prefix} ${hours}:${mins}:${secs}`;
                    const output = document.getElementById('clock-output');
                    output.textContent += timeString + '\n';
                    output.scrollTop = output.scrollHeight;
                }
                
                start() {
                    this.display();
                    this.timer = setInterval(() => this.display(), 1000);
                }
                
                stop() {
                    if (this.timer) {
                        clearInterval(this.timer);
                        this.timer = null;
                    }
                }
            }

            class PrecisionClock extends DigitalClock {
                constructor(prefix, precision = 2000) {
                    super(prefix);
                    this.precision = precision;
                }
                
                start() {
                    this.display();
                    this.timer = setInterval(() => this.display(), this.precision);
                }
            }

            class AlarmClock extends DigitalClock {
                constructor(prefix, wakeupTime) {
                    super(prefix);
                    this.wakeupTime = wakeupTime;
                }
                
                display() {
                    let date = new Date();
                    let [hours, mins, secs] = [date.getHours(), date.getMinutes(), date.getSeconds()];
                    if (hours < 10) hours = '0' + hours;
                    if (mins < 10) mins = '0' + mins;
                    if (secs < 10) secs = '0' + secs;
                    
                    const timeStr = `${hours}:${mins}:${secs}`;
                    const output = document.getElementById('clock-output');
                    output.textContent += `${this.prefix} ${timeStr}\n`;
                    
                    if (timeStr === this.wakeupTime) {
                        output.textContent += '🚨 WAKE UP! Alarm triggered!\n';
                        this.stop();
                    }
                    
                    output.scrollTop = output.scrollHeight;
                }
            }

            let currentClocks = [];

            function startDigitalClock() {
                stopAllClocks();
                const clock = new DigitalClock('Digital Clock:');
                currentClocks.push(clock);
                clock.start();
                
                const output = document.getElementById('clock-output');
                output.textContent = 'Digital Clock started (1 second intervals):\n';
            }

            function startPrecisionClock() {
                stopAllClocks();
                const clock = new PrecisionClock('Precision Clock:', 2000);
                currentClocks.push(clock);
                clock.start();
                
                const output = document.getElementById('clock-output');
                output.textContent = 'Precision Clock started (2 second intervals):\n';
            }

            function startAlarmClock() {
                stopAllClocks();
                
                // Set alarm for 5 seconds from now
                const alarmTime = new Date(Date.now() + 5000);
                const hh = alarmTime.getHours().toString().padStart(2, '0');
                const mm = alarmTime.getMinutes().toString().padStart(2, '0');
                const ss = alarmTime.getSeconds().toString().padStart(2, '0');
                
                const clock = new AlarmClock('Alarm Clock:', `${hh}:${mm}:${ss}`);
                currentClocks.push(clock);
                clock.start();
                
                const output = document.getElementById('clock-output');
                output.textContent = `Alarm Clock started (will ring in 5 seconds at ${hh}:${mm}:${ss}):\n`;
            }

            function stopAllClocks() {
                currentClocks.forEach(clock => clock.stop());
                currentClocks = [];
            }

            // Fetch API demonstrations
            async function testFetchSuccess() {
                const output = document.getElementById('fetch-output');
                output.textContent = 'Fetching data from API...\n';
                
                try {
                    const response = await fetch('https://jsonplaceholder.typicode.com/todos/1');
                    if (response.status === 200) {
                        const data = await response.json();
                        output.textContent += `✅ Success! Response:\n${JSON.stringify(data, null, 2)}`;
                    } else {
                        throw new Error(`Request failed with status ${response.status}`);
                    }
                } catch (error) {
                    output.textContent += `❌ Error: ${error.message}`;
                }
            }

            async function testFetchError() {
                const output = document.getElementById('fetch-output');
                output.textContent = 'Testing error handling with invalid URL...\n';
                
                try {
                    const response = await fetch('https://jsonplaceholder.typicode.com/invalid-endpoint');
                    if (response.status === 200) {
                        const data = await response.json();
                        output.textContent += `Unexpected success: ${JSON.stringify(data)}`;
                    } else {
                        throw new Error(`Request failed with status ${response.status}`);
                    }
                } catch (error) {
                    output.textContent += `✅ Error handled correctly: ${error.message}`;
                }
            }

            async function testMultipleFetch() {
                const output = document.getElementById('fetch-output');
                output.textContent = 'Fetching multiple URLs with Promise.all...\n';
                
                async function fetchURLDataAsync(url) {
                    const response = await fetch(url);
                    if (response.status === 200) {
                        return await response.json();
                    } else {
                        throw new Error(`Request failed with status ${response.status}`);
                    }
                }
                
                async function fetchMultipleURLs(urls) {
                    const fetchPromises = urls.map(fetchURLDataAsync);
                    return await Promise.all(fetchPromises);
                }
                
                const urls = [
                    'https://jsonplaceholder.typicode.com/todos/1',
                    'https://jsonplaceholder.typicode.com/todos/2'
                ];
                
                try {
                    const results = await fetchMultipleURLs(urls);
                    output.textContent += `✅ Successfully fetched ${results.length} items:\n`;
                    results.forEach((item, index) => {
                        output.textContent += `${index + 1}. ${item.title}\n`;
                    });
                } catch (error) {
                    output.textContent += `❌ Error: ${error.message}`;
                }
            }

            function testArrayUnique() {
                const input = document.getElementById('array-input').value;
                const output = document.getElementById('array-output');
                
                function unique(duplicatesArray) {
                    return [...new Set(duplicatesArray)];
                }
                
                const array = input.split(',').map(item => item.trim());
                const uniqueArray = unique(array);
                
                output.textContent = `Array Deduplication:
Original array (${array.length} items): [${array.join(', ')}]
Unique array (${uniqueArray.length} items): [${uniqueArray.join(', ')}]
Duplicates removed: ${array.length - uniqueArray.length}

Uses Set data structure to automatically remove duplicates!`;
            }

            // Intermediate Section Functions
            function selectIntermediateQuestion() {
                const selector = document.getElementById('intermediate-question-selector');
                const questionNum = selector.value;
                
                // Auto-run the selected question
                switch(questionNum) {
                    case '': 
                        document.getElementById('intermediate-output').textContent = 'Select a question above to see JavaScript intermediate concepts in action!';
                        break;
                    case '1': runIntermediateQuestion1(); break;
                    case '2': runIntermediateQuestion2(); break;
                    case '3': runIntermediateQuestion3(); break;
                    case '4': runIntermediateQuestion4(); break;
                    case '5': runIntermediateQuestion5(); break;
                    case '6': runIntermediateQuestion6(); break;
                    case '7': runIntermediateQuestion7(); break;
                    case '8': runIntermediateQuestion8(); break;
                    case '9': runIntermediateQuestion9(); break;
                    case '10': runIntermediateQuestion10(); break;
                }
            }

            // Intermediate Question Functions
            function runIntermediateQuestion1() {
                const output = document.getElementById('intermediate-output');
                
                function ucFirstLetters(str) {
                    return str.split(' ').map(word => 
                        word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
                    ).join(' ');
                }
                
                const examples = [
                    'los angeles',
                    'new york city',
                    'san francisco',
                    'hello world'
                ];
                
                let result = "=== Question 1: String Capitalization ===\n\n";
                result += "Function: ucFirstLetters(str) - Capitalizes first letter of each word\n\n";
                
                examples.forEach(str => {
                    result += `ucFirstLetters("${str}") → "${ucFirstLetters(str)}"\n`;
                });
                
                output.textContent = result;
            }

            function runIntermediateQuestion2() {
                const output = document.getElementById('intermediate-output');
                
                function truncate(str, max) {
                    return str.length > max ? str.slice(0, max) + '...' : str;
                }
                
                function truncateConditional(str, max) {
                    return str.length > max ? str.slice(0, max) + '...' : str;
                }
                
                const testString = 'This text will be truncated if it is too long';
                
                let result = "=== Question 2: String Truncation ===\n\n";
                result += "a) Basic truncate function:\n";
                result += `truncate("${testString}", 25) → "${truncate(testString, 25)}"\n\n`;
                result += "b) Conditional operator variant:\n";
                result += `truncateConditional("${testString}", 25) → "${truncateConditional(testString, 25)}"\n\n`;
                result += "Both functions work identically - they check if length > max and either truncate with '...' or return original.";
                
                output.textContent = result;
            }

            function runIntermediateQuestion3() {
                const output = document.getElementById('intermediate-output');
                
                let animals = ['Tiger', 'Giraffe'];
                
                // a) Add 2 new values to the end
                animals.push('Elephant', 'Lion');
                const afterPush = [...animals];
                
                // b) Add 2 new values to the beginning
                animals.unshift('Bear', 'Wolf');
                const afterUnshift = [...animals];
                
                // c) Sort alphabetically
                animals.sort();
                const afterSort = [...animals];
                
                // d) Replace middle animal
                function replaceMiddleAnimal(arr, newValue) {
                    const middleIndex = Math.floor(arr.length / 2);
                    arr[middleIndex] = newValue;
                    return arr;
                }
                
                // e) Find matching animals (case insensitive)
                function findMatchingAnimals(arr, beginsWith) {
                    return arr.filter(animal => 
                        animal.toLowerCase().startsWith(beginsWith.toLowerCase())
                    );
                }
                
                let result = "=== Question 3: Array Manipulation ===\n\n";
                result += "Starting array: ['Tiger', 'Giraffe']\n\n";
                result += `a) After push('Elephant', 'Lion'): [${afterPush.join(', ')}]\n`;
                result += `b) After unshift('Bear', 'Wolf'): [${afterUnshift.join(', ')}]\n`;
                result += `c) After sort(): [${afterSort.join(', ')}]\n\n`;
                
                const testArray = [...afterSort];
                replaceMiddleAnimal(testArray, 'Zebra');
                result += `d) replaceMiddleAnimal(arr, 'Zebra'): [${testArray.join(', ')}]\n\n`;
                
                const matching = findMatchingAnimals(afterSort, 'e');
                result += `e) findMatchingAnimals(arr, 'e'): [${matching.join(', ')}]`;
                
                output.textContent = result;
            }

            function runIntermediateQuestion4() {
                const output = document.getElementById('intermediate-output');
                
                // Standard for loop version
                function camelCase(cssProp) {
                    let result = '';
                    let capitalizeNext = false;
                    
                    for (let i = 0; i < cssProp.length; i++) {
                        if (cssProp[i] === '-') {
                            capitalizeNext = true;
                        } else {
                            result += capitalizeNext ? cssProp[i].toUpperCase() : cssProp[i];
                            capitalizeNext = false;
                        }
                    }
                    return result;
                }
                
                // For...of loop version
                function camelCaseForOf(cssProp) {
                    let result = '';
                    let capitalizeNext = false;
                    
                    for (let char of cssProp) {
                        if (char === '-') {
                            capitalizeNext = true;
                        } else {
                            result += capitalizeNext ? char.toUpperCase() : char;
                            capitalizeNext = false;
                        }
                    }
                    return result;
                }
                
                // Split/map version (functional approach)
                function camelCaseFunctional(cssProp) {
                    return cssProp.split('-').map((word, index) => 
                        index === 0 ? word : word.charAt(0).toUpperCase() + word.slice(1)
                    ).join('');
                }
                
                const testCases = ['margin-left', 'background-image', 'display', 'border-top-color'];
                
                let result = "=== Question 4: CSS Property Conversion ===\n\n";
                result += "Converting dash-separated CSS properties to camelCase:\n\n";
                
                testCases.forEach(prop => {
                    result += `"${prop}" → "${camelCase(prop)}"\n`;
                });
                
                result += "\nDifferent implementation approaches:\n";
                result += "• Standard for loop (shown above)\n";
                result += "• for...of loop version\n";
                result += "• Functional approach with split/map\n";
                result += "All produce the same results!";
                
                output.textContent = result;
            }

            function runIntermediateQuestion5() {
                const output = document.getElementById('intermediate-output');
                
                // Demonstrate the problem
                let twentyCents = 0.20;
                let tenCents = 0.10;
                let problemResult = twentyCents + tenCents;
                
                // Show why toFixed doesn't work
                let fixedTwenty = twentyCents.toFixed(2);
                let fixedTen = tenCents.toFixed(2);
                let fixedProblem = fixedTwenty + fixedTen; // String concatenation!
                
                // Solutions
                function currencyAddition(float1, float2) {
                    const factor = 100; // For 2 decimal places
                    return Math.round((float1 * factor) + (float2 * factor)) / factor;
                }
                
                function currencyOperation(float1, float2, operation) {
                    const factor = 100;
                    const int1 = Math.round(float1 * factor);
                    const int2 = Math.round(float2 * factor);
                    
                    switch(operation) {
                        case '+': return (int1 + int2) / factor;
                        case '-': return (int1 - int2) / factor;
                        case '*': return (int1 * int2) / (factor * factor);
                        case '/': return int2 !== 0 ? int1 / int2 : NaN;
                        default: throw new Error('Unsupported operation');
                    }
                }
                
                function currencyOperationExtended(float1, float2, operation, numDecimals = 2) {
                    const factor = Math.pow(10, numDecimals);
                    const int1 = Math.round(float1 * factor);
                    const int2 = Math.round(float2 * factor);
                    
                    let result;
                    switch(operation) {
                        case '+': result = (int1 + int2) / factor; break;
                        case '-': result = (int1 - int2) / factor; break;
                        case '*': result = (int1 * int2) / (factor * factor); break;
                        case '/': result = int2 !== 0 ? int1 / int2 : NaN; break;
                        default: throw new Error('Unsupported operation');
                    }
                    
                    return parseFloat(result.toFixed(numDecimals));
                }
                
                let result = "=== Question 5: Floating Point Precision ===\n\n";
                result += "The Problem:\n";
                result += `${twentyCents} + ${tenCents} = ${problemResult} (not 0.3!)\n\n`;
                result += "Why toFixed doesn't work:\n";
                result += `fixedTwenty = "${fixedTwenty}" (string)\n`;
                result += `fixedTen = "${fixedTen}" (string)\n`;
                result += `fixedTwenty + fixedTen = "${fixedProblem}" (string concatenation!)\n\n`;
                result += "Solutions:\n";
                result += `currencyAddition(0.1, 0.2) = ${currencyAddition(0.1, 0.2)}\n`;
                result += `currencyOperation(0.1, 0.2, '+') = ${currencyOperation(0.1, 0.2, '+')}\n`;
                result += `currencyOperation(0.3, 0.1, '*') = ${currencyOperation(0.3, 0.1, '*')}\n`;
                result += `currencyOperationExtended(0.1, 0.2, '+', 3) = ${currencyOperationExtended(0.1, 0.2, '+', 3)}`;
                
                output.textContent = result;
            }

            function runIntermediateQuestion6() {
                const output = document.getElementById('intermediate-output');
                
                function unique(duplicatesArray) {
                    return [...new Set(duplicatesArray)];
                }
                
                const colours = ['red', 'green', 'blue', 'yellow', 'orange', 'red', 'blue', 'yellow'];
                const testScores = [55, 84, 97, 63, 55, 32, 84, 91, 55, 43];
                const myArray = ['apple', 'banana', 'apple', 'cherry', 'banana', 'date'];
                
                let result = "=== Question 6: Array Deduplication ===\n\n";
                result += "Function: unique(duplicatesArray) - Uses Set to remove duplicates\n\n";
                result += `Original colours (${colours.length}): [${colours.join(', ')}]\n`;
                result += `Unique colours (${unique(colours).length}): [${unique(colours).join(', ')}]\n\n`;
                result += `Original scores (${testScores.length}): [${testScores.join(', ')}]\n`;
                result += `Unique scores (${unique(testScores).length}): [${unique(testScores).join(', ')}]\n\n`;
                result += `My test array (${myArray.length}): [${myArray.join(', ')}]\n`;
                result += `Unique values (${unique(myArray).length}): [${unique(myArray).join(', ')}]`;
                
                output.textContent = result;
            }

            function runIntermediateQuestion7() {
                const output = document.getElementById('intermediate-output');
                
                const books = [
                    { id: 1, title: 'The Great Gatsby', author: 'F. Scott Fitzgerald', year: 1925 },
                    { id: 2, title: 'To Kill a Mockingbird', author: 'Harper Lee', year: 1960 },
                    { id: 3, title: '1984', author: 'George Orwell', year: 1949 },
                    { id: 4, title: 'Brave New World', author: 'Aldous Huxley', year: 1932 },
                    { id: 5, title: 'The Catcher in the Rye', author: 'J.D. Salinger', year: 1951 },
                ];
                
                function getBookTitle(bookId) {
                    const book = books.find(book => book.id === bookId);
                    return book ? book.title : 'Book not found';
                }
                
                function getOldBooks() {
                    return books.filter(book => book.year < 1950);
                }
                
                function addGenre() {
                    // Note: Modifying objects directly instead of creating copies (per feedback)
                    return books.map(book => {
                        book.genre = 'classic';
                        return book;
                    });
                }
                
                function getTitles(authorInitial) {
                    const upperInitial = authorInitial.toUpperCase();
                    const lowerInitial = authorInitial.toLowerCase();
                    return books
                        .filter(book => {
                            const firstName = book.author.split(' ')[0];
                            return firstName.toUpperCase().startsWith(upperInitial) || 
                                   firstName.toLowerCase().startsWith(lowerInitial);
                        })
                        .map(book => book.title);
                }
                
                function latestBook() {
                    let latest = books[0];
                    books.forEach(book => {
                        if (book.year > latest.year) {
                            latest = book;
                        }
                    });
                    return latest;
                }
                
                let result = "=== Question 7: Array Methods Practice ===\n\n";
                result += `a) getBookTitle(3): "${getBookTitle(3)}"\n`;
                result += `b) getOldBooks(): ${getOldBooks().length} books written before 1950\n`;
                result += `   Titles: ${getOldBooks().map(b => b.title).join(', ')}\n`;
                result += `c) addGenre(): Added "classic" genre to all books\n`;
                result += `d) getTitles('F'): [${getTitles('F').join(', ')}]\n`;
                result += `   (Note: Case-insensitive matching implemented per feedback)\n`;
                result += `e) latestBook(): "${latestBook().title}" (${latestBook().year})`;
                
                output.textContent = result;
            }

            function runIntermediateQuestion8() {
                const output = document.getElementById('intermediate-output');
                
                // Part a & b - Create phoneBookDEF with initial values (per feedback)
                const phoneBookDEF = new Map([
                    ['David', '04332277'],
                    ['Elizabeth', '04776622'],
                    ['Fred', '04373737']
                ]);
                
                // Original phoneBookABC
                const phoneBookABC = new Map();
                phoneBookABC.set('Annabelle', '0412312343');
                phoneBookABC.set('Barry', '0433221117');
                phoneBookABC.set('Caroline', '0455221182');
                
                // Part c - Update Caroline's number
                phoneBookABC.set('Caroline', '0499888777');
                
                // Part d - Print function
                function printPhoneBook(contacts) {
                    let output = '';
                    contacts.forEach((phone, name) => {
                        output += `${name}: ${phone}\n`;
                    });
                    return output;
                }
                
                // Part e - Combine maps
                const phoneBook = new Map([...phoneBookABC, ...phoneBookDEF]);
                
                // Part f - Get all names
                const allNames = [...phoneBook.keys()];
                
                let result = "=== Question 8: Map Data Structure ===\n\n";
                result += "a) & b) phoneBookDEF created with initial values using Map constructor:\n";
                result += "const phoneBookDEF = new Map([['David', '04332277'], ...])\n\n";
                result += "c) Updated Caroline's number in phoneBookABC\n\n";
                result += "d) phoneBookABC contents:\n";
                result += printPhoneBook(phoneBookABC);
                result += "\nphoneBookDEF contents:\n";
                result += printPhoneBook(phoneBookDEF);
                result += "\ne) Combined phoneBook:\n";
                result += printPhoneBook(phoneBook);
                result += `f) All names: ${allNames.join(', ')}`;
                
                output.textContent = result;
            }

            function runIntermediateQuestion9() {
                const output = document.getElementById('intermediate-output');
                
                let salaries = {
                    "Timothy": 35000,
                    "David": 25000,
                    "Mary": 55000,
                    "Christina": 75000,
                    "James": 43000
                };
                
                function sumSalaries(salaries) {
                    return Object.values(salaries).reduce((sum, salary) => sum + salary, 0);
                }
                
                function topEarner(salaries) {
                    let maxSalary = 0;
                    let topEarnerName = '';
                    
                    for (let [name, salary] of Object.entries(salaries)) {
                        if (salary > maxSalary) {
                            maxSalary = salary;
                            topEarnerName = name;
                        }
                    }
                    return topEarnerName;
                }
                
                const totalSalaries = sumSalaries(salaries);
                const highestEarner = topEarner(salaries);
                
                let result = "=== Question 9: Object Property Calculations ===\n\n";
                result += "Salaries object:\n";
                Object.entries(salaries).forEach(([name, salary]) => {
                    result += `${name}: $${salary.toLocaleString()}\n`;
                });
                result += `\na) sumSalaries(): $${totalSalaries.toLocaleString()}\n`;
                result += `b) topEarner(): ${highestEarner} ($${salaries[highestEarner].toLocaleString()})`;
                
                output.textContent = result;
            }

            function runIntermediateQuestion10() {
                const output = document.getElementById('intermediate-output');
                
                const today = new Date();
                const currentTime = today.toLocaleTimeString();
                const hoursToday = today.getHours();
                
                // a) Minutes passed today
                const minutesToday = today.getHours() * 60 + today.getMinutes();
                
                // b) Seconds passed today
                const secondsToday = minutesToday * 60 + today.getSeconds();
                
                // c) Calculate age (example with a birth date)
                const birthDate = new Date('1990-05-15'); // Example birth date
                const ageYears = today.getFullYear() - birthDate.getFullYear();
                const ageMonths = today.getMonth() - birthDate.getMonth();
                const ageDays = today.getDate() - birthDate.getDate();
                
                // Adjust for negative months/days
                let adjustedYears = ageYears;
                let adjustedMonths = ageMonths;
                let adjustedDays = ageDays;
                
                if (adjustedDays < 0) {
                    adjustedMonths--;
                    const lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                    adjustedDays += lastMonth.getDate();
                }
                
                if (adjustedMonths < 0) {
                    adjustedYears--;
                    adjustedMonths += 12;
                }
                
                // d) Days between function
                function daysInBetween(date1, date2) {
                    const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
                    const diffDays = Math.round(Math.abs((date1 - date2) / oneDay));
                    return diffDays;
                }
                
                const testDate1 = new Date('2024-01-01');
                const testDate2 = new Date('2024-01-15');
                const daysBetween = daysInBetween(testDate1, testDate2);
                
                let result = "=== Question 10: Date and Time Operations ===\n\n";
                result += `Current time: ${currentTime}\n`;
                result += `Hours passed today: ${hoursToday}\n\n`;
                result += `a) Minutes passed today: ${minutesToday}\n`;
                result += `b) Seconds passed today: ${secondsToday}\n`;
                result += `c) Age calculation (example with birth date 1990-05-15):\n`;
                result += `   I am ${adjustedYears} years, ${adjustedMonths} months and ${adjustedDays} days old\n`;
                result += `d) daysInBetween(${testDate1.toDateString()}, ${testDate2.toDateString()}): ${daysBetween} days`;
                
                output.textContent = result;
            }

            // Advanced Question Functions
            function selectAdvancedQuestion() {
                const selector = document.getElementById('advanced-question-selector');
                const questionNum = selector.value;
                
                // Auto-run the selected question
                switch(questionNum) {
                    case '': 
                        document.getElementById('advanced-output').textContent = 'Select a question above to see JavaScript advanced concepts in action!';
                        break;
                    case '1': runAdvancedQuestion1(); break;
                    case '2': runAdvancedQuestion2(); break;
                    case '3': runAdvancedQuestion3(); break;
                    case '4': runAdvancedQuestion4(); break;
                    case '5': runAdvancedQuestion5(); break;
                    case '6': runAdvancedQuestion6(); break;
                    case '7': runAdvancedQuestion7(); break;
                    case '8': runAdvancedQuestion8(); break;
                    case '9': runAdvancedQuestion9(); break;
                    case '10': runAdvancedQuestion10(); break;
                }
            }

            // eCommerce Exercise Functions
            function selectEcommerceExercise() {
                const selector = document.getElementById('ecommerce-exercise-selector');
                const exerciseNum = selector.value;
                
                // Auto-run the selected exercise
                switch(exerciseNum) {
                    case '': 
                        document.getElementById('ecommerce-output').textContent = 'Select an exercise above to see advanced eCommerce concepts in action!';
                        break;
                    case '1': runEcommerceExercise1(); break;
                    case '2': runEcommerceExercise2(); break;
                    case '3': runEcommerceExercise3(); break;
                    case '4': runEcommerceExercise4(); break;
                    case '5': runEcommerceExercise5(); break;
                    case '6': runEcommerceExercise6(); break;
                    case '7': runEcommerceExercise7(); break;
                    case '8': runEcommerceExercise8(); break;
                }
            }

            // Advanced Question Functions
            function runAdvancedQuestion1() {
                const output = document.getElementById('advanced-output');
                
                // Original makeCounter
                function makeCounter(startFrom = 0, incrementBy = 1) {
                    let currentCount = startFrom;
                    return function() {
                        currentCount += incrementBy;
                        console.log(currentCount);
                        return currentCount;
                    };
                }
                
                // Test different configurations
                let counter1 = makeCounter();
                let counter2 = makeCounter(5, 2);
                let counter3 = makeCounter(-10, -1);
                
                let result = "=== Question 1: Closure-Based Counter ===\n\n";
                result += "Enhanced makeCounter(startFrom = 0, incrementBy = 1)\n\n";
                result += "Testing three independent counters:\n";
                result += "• counter1 = makeCounter() → starts at 0, increments by 1\n";
                result += "• counter2 = makeCounter(5, 2) → starts at 5, increments by 2\n";
                result += "• counter3 = makeCounter(-10, -1) → starts at -10, decrements by 1\n\n";
                result += "Each counter maintains its own closure with independent state.\n";
                result += "Test in console: counter1(), counter2(), counter3() etc.";
                
                // Store counters globally for testing
                window.testCounter1 = counter1;
                window.testCounter2 = counter2;
                window.testCounter3 = counter3;
                
                output.textContent = result;
            }

            function runAdvancedQuestion2() {
                const output = document.getElementById('advanced-output');
                
                // Original function
                function delayMsg(msg) {
                    console.log(`This message will be printed after a delay: ${msg}`);
                }
                
                // Arrow function version
                const delayMsgArrow = (msg) => {
                    console.log(`This message will be printed after a delay: ${msg}`);
                };
                
                let result = "=== Question 2: Asynchronous Message Delays ===\n\n";
                result += "Execution order:\n";
                result += "1. '#4: Not delayed at all' (immediate)\n";
                result += "2. '#3: Delayed by 0ms' (next tick)\n";
                result += "3. '#2: Delayed by 20ms' (after 20ms)\n";
                result += "4. '#1: Delayed by 100ms' (after 100ms)\n\n";
                result += "Why? Even setTimeout(fn, 0) goes to the event queue,\n";
                result += "while direct calls execute immediately.\n\n";
                result += "Arrow function version created: delayMsgArrow\n";
                result += "Fifth test with clearTimeout can be implemented to cancel long delays.";
                
                // Demonstrate the timing
                console.log("=== Advanced Q2 Demo ===");
                setTimeout(() => delayMsg('#1: Delayed by 100ms'), 100);
                setTimeout(() => delayMsg('#2: Delayed by 20ms'), 20);
                setTimeout(() => delayMsg('#3: Delayed by 0ms'), 0);
                delayMsg('#4: Not delayed at all');
                
                output.textContent = result;
            }

            function runAdvancedQuestion3() {
                const output = document.getElementById('advanced-output');
                
                function debounce(func, ms = 1000) {
                    let timeout;
                    return function(...args) {
                        clearTimeout(timeout);
                        timeout = setTimeout(() => func.apply(this, args), ms);
                    };
                }
                
                // Test function
                function printMe(msg = 'printing debounced message') {
                    console.log(msg);
                }
                
                // Create debounced version
                const debouncedPrint = debounce(printMe, 500);
                
                let result = "=== Question 3: Debouncing Implementation ===\n\n";
                result += "debounce(func, ms = 1000) decorator created!\n\n";
                result += "Features:\n";
                result += "• Delays execution until there's a pause in calls\n";
                result += "• Cancels previous timeouts on new calls\n";
                result += "• Supports custom delay time (ms parameter)\n";
                result += "• Supports function arguments using ...rest and apply\n\n";
                result += "Use case: Preventing rapid-fire button clicks or search inputs\n";
                result += "from overwhelming the server with requests.\n\n";
                result += "Test in console: debouncedPrint('test message')";
                
                // Store for testing
                window.debouncedPrint = debouncedPrint;
                
                output.textContent = result;
            }

            function runAdvancedQuestion4() {
                const output = document.getElementById('advanced-output');
                
                // Fibonacci with setInterval
                function printFibonacci(limit = 10) {
                    let a = 1, b = 1, count = 0;
                    console.log(a); // First number
                    if (limit > 1) console.log(b); // Second number
                    count = 2;
                    
                    const interval = setInterval(() => {
                        if (count >= limit) {
                            clearInterval(interval);
                            return;
                        }
                        const next = a + b;
                        console.log(next);
                        a = b;
                        b = next;
                        count++;
                    }, 1000);
                    
                    return interval;
                }
                
                // Fibonacci with nested setTimeout
                function printFibonacciTimeouts(limit = 10) {
                    let a = 1, b = 1, count = 0;
                    
                    function nextFib() {
                        if (count >= limit) return;
                        
                        if (count === 0) {
                            console.log(a);
                        } else if (count === 1) {
                            console.log(b);
                        } else {
                            const next = a + b;
                            console.log(next);
                            a = b;
                            b = next;
                        }
                        
                        count++;
                        setTimeout(nextFib, 1000);
                    }
                    
                    nextFib();
                }
                
                let result = "=== Question 4: Fibonacci Sequence with Timers ===\n\n";
                result += "Two implementations created:\n\n";
                result += "a) printFibonacci(limit) - Uses setInterval\n";
                result += "   • Cleaner for regular intervals\n";
                result += "   • Returns interval ID for clearing\n\n";
                result += "b) printFibonacciTimeouts(limit) - Uses nested setTimeout\n";
                result += "   • More control over timing\n";
                result += "   • Self-scheduling approach\n\n";
                result += "Both print Fibonacci sequence: 1, 1, 2, 3, 5, 8, 13, 21, 34...\n";
                result += "Default limit: 10 numbers\n\n";
                result += "Test in console: printFibonacci(5) or printFibonacciTimeouts(5)";
                
                // Store for testing
                window.printFibonacci = printFibonacci;
                window.printFibonacciTimeouts = printFibonacciTimeouts;
                
                output.textContent = result;
            }

            function runAdvancedQuestion5() {
                const output = document.getElementById('advanced-output');
                
                let car = {
                    make: "Porsche",
                    model: '911',
                    year: 1964,
                    description() {
                        console.log(`This car is a ${this.make} ${this.model} from ${this.year}`);
                    }
                };
                
                // Clone and modify
                let newCar = { ...car, year: 2023 };
                
                // Bound version
                let boundDescription = car.description.bind(car);
                
                let result = "=== Question 5: Context Binding Issues ===\n\n";
                result += "Problem: setTimeout loses 'this' context\n";
                result += "car.description(); // ✓ Works - 'this' is car\n";
                result += "setTimeout(car.description, 200); // ✗ Fails - 'this' is undefined/window\n\n";
                result += "Solutions:\n";
                result += "a) Wrapper function: setTimeout(() => car.description(), 200)\n";
                result += "b) Clone with new year: let newCar = { ...car, year: 2023 }\n";
                result += "c) The delayed call uses original values (lexical scope)\n";
                result += "d) Use bind: let boundDescription = car.description.bind(car)\n";
                result += "e) Bound functions maintain their context even after property changes\n\n";
                result += "Key insight: 'this' depends on HOW a function is called, not WHERE it's defined.";
                
                // Demonstrate the fixes
                console.log("=== Advanced Q5 Demo ===");
                car.description(); // Works
                setTimeout(() => car.description(), 100); // Fixed with wrapper
                setTimeout(boundDescription, 200); // Fixed with bind
                
                output.textContent = result;
            }

            function runAdvancedQuestion6() {
                const output = document.getElementById('advanced-output');
                
                // Add delay method to Function prototype
                Function.prototype.delay = function(ms) {
                    const originalFunction = this;
                    return function(...args) {
                        setTimeout(() => {
                            originalFunction.apply(this, args);
                        }, ms);
                    };
                };
                
                // Test functions
                function multiply(a, b) {
                    console.log(a * b);
                }
                
                function multiplyFour(a, b, c, d) {
                    console.log(a * b * c * d);
                }
                
                let result = "=== Question 6: Function Prototype Extension ===\n\n";
                result += "Added delay(ms) method to Function.prototype\n\n";
                result += "Usage:\n";
                result += "multiply.delay(500)(5, 5); // prints 25 after 500ms\n";
                result += "multiplyFour.delay(1000)(2, 3, 4, 5); // prints 120 after 1000ms\n\n";
                result += "Implementation uses:\n";
                result += "• ...rest parameters to accept any number of arguments\n";
                result += "• apply() to maintain context and spread arguments\n";
                result += "• setTimeout for the delay\n\n";
                result += "Note: Both originalFunction.apply(this, args) and\n";
                result += "originalFunction.apply(this, arguments) are valid approaches.";
                
                // Demonstrate
                console.log("=== Advanced Q6 Demo ===");
                multiply.delay(500)(5, 5);
                multiplyFour.delay(1000)(2, 3, 4, 5);
                
                output.textContent = result;
            }

            function runAdvancedQuestion7() {
                const output = document.getElementById('advanced-output');
                
                // Base class
                class DigitalClock {
                    constructor(prefix) {
                        this.prefix = prefix;
                    }
                    
                    display() {
                        let date = new Date();
                        let [hours, mins, secs] = [date.getHours(), date.getMinutes(), date.getSeconds()];
                        if (hours < 10) hours = '0' + hours;
                        if (mins < 10) mins = '0' + mins;
                        if (secs < 10) secs = '0' + secs;
                        console.log(`${this.prefix} ${hours}:${mins}:${secs}`);
                    }
                    
                    stop() {
                        clearInterval(this.timer);
                    }
                    
                    start() {
                        this.display();
                        this.timer = setInterval(() => this.display(), 1000);
                    }
                }
                
                // Precision clock with custom interval
                class PrecisionClock extends DigitalClock {
                    constructor(prefix, precision = 1000) {
                        super(prefix);
                        this.precision = precision;
                    }
                    
                    start() {
                        this.display();
                        this.timer = setInterval(() => this.display(), this.precision);
                    }
                }
                
                // Alarm clock with wake-up time
                class AlarmClock extends DigitalClock {
                    constructor(prefix, wakeupTime = "07:00:00") {
                        super(prefix);
                        this.wakeupTime = wakeupTime;
                    }
                    
                    display() {
                        let date = new Date();
                        let [hours, mins, secs] = [date.getHours(), date.getMinutes(), date.getSeconds()];
                        
                        if (hours < 10) hours = '0' + hours;
                        if (mins < 10) mins = '0' + mins;
                        if (secs < 10) secs = '0' + secs;
                        
                        const timeStr = `${hours}:${mins}:${secs}`;
                        console.log(`${this.prefix} ${timeStr}`);
                        
                        if (timeStr === this.wakeupTime) {
                            console.log("Wake Up!");
                            this.stop();
                        }
                    }
                }
                
                let result = "=== Question 7: Class Inheritance with Timers ===\n\n";
                result += "Created three clock classes:\n\n";
                result += "1. DigitalClock (base class)\n";
                result += "   • Updates every 1000ms by default\n\n";
                result += "2. PrecisionClock extends DigitalClock\n";
                result += "   • Custom precision parameter (default: 1000ms)\n";
                result += "   • Example: new PrecisionClock('Fast:', 500)\n\n";
                result += "3. AlarmClock extends DigitalClock\n";
                result += "   • Stops and shows 'Wake Up!' at specified time\n";
                result += "   • Default wakeupTime: '07:00:00'\n";
                result += "   • Nice use of setTimeout() to automatically schedule the alarm\n\n";
                result += "All classes inherit display() and stop() from base class.";
                
                // Store for testing
                window.DigitalClock = DigitalClock;
                window.PrecisionClock = PrecisionClock;
                window.AlarmClock = AlarmClock;
                
                output.textContent = result;
            }

            function runAdvancedQuestion8() {
                const output = document.getElementById('advanced-output');
                
                // String validation decorator
                function validateStringArg(fn) {
                    return function(...args) {
                        // Validate all arguments are strings
                        for (let i = 0; i < args.length; i++) {
                            if (typeof args[i] !== 'string') {
                                throw new Error(`Argument ${i + 1} must be a string, received: ${typeof args[i]}`);
                            }
                        }
                        return fn.apply(this, args);
                    };
                }
                
                // Original function (extended to handle multiple items)
                function orderItems(...itemNames) {
                    if (itemNames.length === 1) {
                        return `Order placed for: ${itemNames[0]}`;
                    } else {
                        return `Order placed for: ${itemNames.join(', ')}`;
                    }
                }
                
                // Create decorated version
                const validatedOrderItem = validateStringArg(orderItems);
                
                let result = "=== Question 8: Function Argument Validation ===\n\n";
                result += "Created validateStringArg(fn) decorator:\n";
                result += "• Validates ALL arguments are strings\n";
                result += "• Throws descriptive errors for non-strings\n";
                result += "• Uses ...rest operator for multiple arguments\n\n";
                result += "Enhanced orderItems function:\n";
                result += "• Accepts multiple item names using ...rest\n";
                result += "• Joins multiple items with commas\n\n";
                result += "Testing:\n";
                result += '✓ validatedOrderItem("Apple Watch") → Works\n';
                result += '✓ validatedOrderItem("Coffee", "Tea") → Works\n';
                result += '✗ validatedOrderItem(123) → Throws error\n\n';
                result += "Use try-catch blocks to handle validation errors gracefully.";
                
                // Demonstrate with try-catch
                try {
                    console.log("=== Advanced Q8 Demo ===");
                    console.log(validatedOrderItem("Apple Watch"));
                    console.log(validatedOrderItem("Coffee", "Tea", "Sandwich"));
                } catch (error) {
                    console.error(error.message);
                }
                
                // Store for testing
                window.validatedOrderItem = validatedOrderItem;
                
                output.textContent = result;
            }

            function runAdvancedQuestion9() {
                const output = document.getElementById('advanced-output');
                
                function randomDelay() {
                    return new Promise((resolve, reject) => {
                        const delay = Math.floor(Math.random() * 20000) + 1000; // 1-20 seconds
                        
                        setTimeout(() => {
                            if (delay % 2 === 0) {
                                resolve(delay); // Even = success
                            } else {
                                reject(delay); // Odd = failure
                            }
                        }, delay);
                    });
                }
                
                let result = "=== Question 9: Promise-Based Random Delays ===\n\n";
                result += "randomDelay() function created:\n";
                result += "• Random delay between 1-20 seconds\n";
                result += "• Even delays → resolve (success)\n";
                result += "• Odd delays → reject (failure)\n";
                result += "• Returns delay value for success/error messages\n\n";
                result += "Usage:\n";
                result += "randomDelay()\n";
                result += "  .then(delay => console.log(`Success after ${delay}ms`))\n";
                result += "  .catch(delay => console.log(`Failed after ${delay}ms`))\n\n";
                result += "Testing now - check console for results!";
                
                // Demonstrate
                console.log("=== Advanced Q9 Demo ===");
                randomDelay()
                    .then(delay => console.log(`Success! Delay was ${delay}ms (even number)`))
                    .catch(delay => console.log(`Failed! Delay was ${delay}ms (odd number)`));
                
                // Store for testing
                window.randomDelay = randomDelay;
                
                output.textContent = result;
            }

            function runAdvancedQuestion10() {
                const output = document.getElementById('advanced-output');
                
                // Original promise-based version
                function fetchURLData(url) {
                    let fetchPromise = fetch(url).then(response => {
                        if (response.status === 200) {
                            return response.json();
                        } else {
                            throw new Error(`Request failed with status ${response.status}`);
                        }
                    });
                    return fetchPromise;
                }
                
                // Async/await version
                async function fetchURLDataAsync(url) {
                    try {
                        const response = await fetch(url);
                        if (response.status === 200) {
                            return await response.json();
                        } else {
                            throw new Error(`Request failed with status ${response.status}`);
                        }
                    } catch (error) {
                        throw new Error(`Fetch failed: ${error.message}`);
                    }
                }
                
                // Extension: Multiple URLs with Promise.all
                async function fetchMultipleURLs(urls) {
                    try {
                        const fetchPromises = urls.map(fetchURLDataAsync);
                        const results = await Promise.all(fetchPromises);
                        return results;
                    } catch (error) {
                        throw new Error(`One of the requests failed: ${error.message}`);
                    }
                }
                
                let result = "=== Question 10: Fetch API with Async/Await ===\n\n";
                result += "Three versions created:\n\n";
                result += "1. fetchURLData(url) - Original promise-based\n";
                result += "2. fetchURLDataAsync(url) - Async/await version\n";
                result += "3. fetchMultipleURLs(urls[]) - Extension with Promise.all\n\n";
                result += "Async/await benefits:\n";
                result += "• More readable, synchronous-looking code\n";
                result += "• Better error handling with try-catch\n";
                result += "• Easier to debug and follow logic\n\n";
                result += "Testing with JSONPlaceholder API - check console!\n";
                result += "Both valid and invalid URLs tested for error handling.";
                
                // Demonstrate both versions
                console.log("=== Advanced Q10 Demo ===");
                
                // Test valid URL
                fetchURLDataAsync('https://jsonplaceholder.typicode.com/todos/1')
                    .then(data => console.log('Async Success:', data))
                    .catch(error => console.error('Async Error:', error.message));
                
                // Test multiple URLs
                const testUrls = [
                    'https://jsonplaceholder.typicode.com/todos/1',
                    'https://jsonplaceholder.typicode.com/todos/2'
                ];
                
                fetchMultipleURLs(testUrls)
                    .then(results => console.log('Multiple Success:', results))
                    .catch(error => console.error('Multiple Error:', error.message));
                
                // Store for testing
                window.fetchURLDataAsync = fetchURLDataAsync;
                window.fetchMultipleURLs = fetchMultipleURLs;
                
                output.textContent = result;
            }

            // eCommerce Exercise Functions
            function runEcommerceExercise1() {
                const output = document.getElementById('ecommerce-output');
                
                // Product class with getters and setters
                class Product {
                    constructor(name, price, description) {
                        this._name = name;
                        this.price = price; // Use setter for validation
                        this._description = description;
                    }
                    
                    get name() { return this._name; }
                    get price() { return this._price; }
                    get description() { return this._description; }
                    
                    set name(value) { this._name = value; }
                    set price(value) {
                        if (value < 0) throw new Error('Price cannot be negative');
                        this._price = value;
                    }
                    set description(value) { this._description = value; }
                    
                    displayInfo() {
                        return `${this.name} - $${this.price}: ${this.description}`;
                    }
                }
                
                let result = "=== Exercise 1: Basic Object with Getters and Setters ===\n\n";
                
                try {
                    const product1 = new Product("Laptop", 999.99, "High-performance laptop");
                    result += `✓ Product created: ${product1.displayInfo()}\n`;
                    
                    product1.price = 899.99;
                    result += `✓ Price updated: ${product1.displayInfo()}\n`;
                    
                    // Store globally for testing
                    window.Product = Product;
                    
                } catch (error) {
                    result += `✗ Error: ${error.message}\n`;
                }
                
                result += "\nFeatures demonstrated:\n";
                result += "• Private properties with underscore convention\n";
                result += "• Getter/setter methods for controlled access\n";
                result += "• Price validation with error throwing\n";
                result += "• Clean encapsulation and data protection";
                
                output.textContent = result;
            }

            function runEcommerceExercise2() {
                const output = document.getElementById('ecommerce-output');
                
                // Inheritance classes
                class Product {
                    constructor(name, price, description) {
                        this._name = name;
                        this._price = price;
                        this._description = description;
                    }
                    
                    get name() { return this._name; }
                    get price() { return this._price; }
                    get description() { return this._description; }
                    
                    displayInfo() {
                        return `${this.name} - $${this.price}: ${this.description}`;
                    }
                }
                
                class TV extends Product {
                    constructor(name, price, description, screenSize) {
                        super(name, price, description);
                        this.screenSize = screenSize;
                    }
                    
                    displayInfo() {
                        return `${super.displayInfo()} (Screen: ${this.screenSize}")`;
                    }
                }
                
                class Shirt extends Product {
                    constructor(name, price, description, size) {
                        super(name, price, description);
                        this.size = size;
                    }
                    
                    displayInfo() {
                        return `${super.displayInfo()} (Size: ${this.size})`;
                    }
                }
                
                let result = "=== Exercise 2: Prototypal Inheritance ===\n\n";
                
                const tv1 = new TV("Samsung 4K TV", 1500, "75-inch 4K TV", 75);
                const shirt1 = new Shirt("Casual Shirt", 29.99, "Cotton shirt", 'L');
                
                result += `✓ TV: ${tv1.displayInfo()}\n`;
                result += `✓ Shirt: ${shirt1.displayInfo()}\n\n`;
                
                result += "Inheritance features:\n";
                result += "• TV and Shirt extend Product base class\n";
                result += "• Each subclass adds specific properties\n";
                result += "• Method overriding with super() calls\n";
                result += "• Polymorphic behavior with displayInfo()";
                
                output.textContent = result;
            }

            function runEcommerceExercise3() {
                const output = document.getElementById('ecommerce-output');
                
                // Constructor function (ES5 style)
                function Book(name, price, description, author) {
                    this.name = name;
                    this.price = price;
                    this.description = description;
                    this.author = author;
                    this.human = true;
                }
                
                Book.prototype.displayInfo = function() {
                    return `${this.name} - $${this.price}: ${this.description} by ${this.author}`;
                };
                
                let result = "=== Exercise 3: Constructor Functions ===\n\n";
                
                const book1 = new Book("1984", 17, "A great book", "George Orwell");
                result += `✓ Book created: ${book1.displayInfo()}\n`;
                result += `✓ Human property: ${book1.human}\n\n`;
                
                result += "ES5 Constructor features:\n";
                result += "• Traditional function constructor pattern\n";
                result += "• Prototype method for shared behavior\n";
                result += "• Direct property assignment in constructor\n";
                result += "• Demonstrates pre-ES6 class patterns\n";
                result += "• Compatible with older JavaScript environments";
                
                output.textContent = result;
            }

            function runEcommerceExercise4() {
                const output = document.getElementById('ecommerce-output');
                
                class Product {
                    constructor(name, price, description) {
                        this.name = name;
                        this.price = price;
                        this.description = description;
                    }
                    
                    displayInfo() {
                        return `${this.name} - $${this.price}: ${this.description}`;
                    }
                    
                    static compare(product1, product2) {
                        return product1.price - product2.price;
                    }
                }
                
                let result = "=== Exercise 4: Static Methods ===\n\n";
                
                const products = [
                    new Product("Expensive Item", 500, "High-end product"),
                    new Product("Cheap Item", 10, "Budget product"),
                    new Product("Medium Item", 100, "Mid-range product")
                ];
                
                result += "Before sorting:\n";
                products.forEach(p => {
                    result += `• ${p.displayInfo()}\n`;
                });
                
                products.sort(Product.compare);
                
                result += "\nAfter sorting by price (using static compare):\n";
                products.forEach(p => {
                    result += `• ${p.displayInfo()}\n`;
                });
                
                result += "\nStatic method features:\n";
                result += "• Class-level method, not instance method\n";
                result += "• Used for utility functions like comparison\n";
                result += "• Perfect for Array.sort() callback\n";
                result += "• No access to instance properties (this)";
                
                output.textContent = result;
            }

            function runEcommerceExercise5() {
                const output = document.getElementById('ecommerce-output');
                
                class Product {
                    constructor(name, price, description) {
                        this._name = name;
                        this.price = price; // Use setter
                        this._description = description;
                    }
                    
                    set price(value) {
                        if (value < 0) {
                            throw new Error('Price cannot be negative');
                        }
                        this._price = value;
                    }
                    
                    get price() { return this._price; }
                    
                    displayInfo() {
                        return `${this._name} - $${this.price}: ${this._description}`;
                    }
                }
                
                let result = "=== Exercise 5: Validation Logic ===\n\n";
                
                // Test valid creation
                try {
                    const validProduct = new Product("Valid Product", 25, "This should work");
                    result += `✓ Valid product: ${validProduct.displayInfo()}\n`;
                } catch (error) {
                    result += `✗ Unexpected error: ${error.message}\n`;
                }
                
                // Test invalid creation
                try {
                    const invalidProduct = new Product("Invalid", -50, "Should fail");
                    result += `✗ Should have failed but didn't\n`;
                } catch (error) {
                    result += `✓ Validation caught: ${error.message}\n`;
                }
                
                // Test invalid update
                try {
                    const product = new Product("Test", 50, "Test product");
                    product.price = -10;
                    result += `✗ Should have failed but didn't\n`;
                } catch (error) {
                    result += `✓ Update validation caught: ${error.message}\n`;
                }
                
                result += "\nValidation features:\n";
                result += "• Setter validation prevents negative prices\n";
                result += "• Immediate error throwing for invalid data\n";
                result += "• Works for both construction and updates\n";
                result += "• Maintains data integrity throughout lifecycle";
                
                output.textContent = result;
            }

            function runEcommerceExercise6() {
                const output = document.getElementById('ecommerce-output');
                
                class ProductWithStock {
                    #stockCount = 0; // Private field
                    
                    constructor(name, price, description, initialStock = 0) {
                        this.name = name;
                        this.price = price;
                        this.description = description;
                        this.#stockCount = initialStock;
                    }
                    
                    updateStock(quantity) {
                        if (this.#stockCount + quantity < 0) {
                            throw new Error('Insufficient stock');
                        }
                        this.#stockCount += quantity;
                    }
                    
                    get stock() {
                        return this.#stockCount;
                    }
                    
                    displayInfo() {
                        return `${this.name} - $${this.price}: ${this.description} (Stock: ${this.#stockCount})`;
                    }
                }
                
                let result = "=== Exercise 6: Private Members ===\n\n";
                
                const stockProduct = new ProductWithStock("Stocked Item", 50, "Item with stock", 10);
                result += `✓ Initial: ${stockProduct.displayInfo()}\n`;
                
                stockProduct.updateStock(5);
                result += `✓ After adding 5: ${stockProduct.displayInfo()}\n`;
                
                try {
                    stockProduct.updateStock(-20);
                    result += `✗ Should have failed\n`;
                } catch (error) {
                    result += `✓ Stock protection: ${error.message}\n`;
                }
                
                result += `✓ Read-only access: ${stockProduct.stock} units\n\n`;
                
                result += "Private field features:\n";
                result += "• True privacy with # syntax (ES2022)\n";
                result += "• Cannot be accessed from outside class\n";
                result += "• Controlled access through public methods\n";
                result += "• Getter provides read-only access\n";
                result += "• Validation prevents invalid operations";
                
                output.textContent = result;
            }

            function runEcommerceExercise7() {
                const output = document.getElementById('ecommerce-output');
                
                class Product {
                    constructor(name, price, description) {
                        this.name = name;
                        this.price = price;
                        this.description = description;
                    }
                    
                    displayInfo() {
                        return `${this.name} - $${this.price}: ${this.description}`;
                    }
                    
                    static compare(product1, product2) {
                        return product1.price - product2.price;
                    }
                }
                
                class Cart {
                    constructor() {
                        this.items = [];
                    }
                    
                    addItem(product, quantity) {
                        if (!(product instanceof Product)) {
                            throw new Error('Only Product instances can be added');
                        }
                        if (quantity <= 0) {
                            throw new Error('Quantity must be positive');
                        }
                        
                        const existingItem = this.items.find(item => item.product === product);
                        if (existingItem) {
                            existingItem.quantity += quantity;
                        } else {
                            this.items.push({ product, quantity });
                        }
                    }
                    
                    removeItem(product) {
                        this.items = this.items.filter(item => item.product !== product);
                    }
                    
                    updateQuantity(product, newQuantity) {
                        const item = this.items.find(item => item.product === product);
                        if (item) {
                            if (newQuantity <= 0) {
                                this.removeItem(product);
                            } else {
                                item.quantity = newQuantity;
                            }
                        }
                    }
                    
                    sort() {
                        this.items.sort((a, b) => Product.compare(a.product, b.product));
                    }
                    
                    calculateTotal() {
                        return this.items.reduce((total, item) => 
                            total + (item.product.price * item.quantity), 0);
                    }
                    
                    getCartSummary() {
                        if (this.items.length === 0) return "Cart is empty";
                        
                        let summary = "Cart contents:\n";
                        this.items.forEach(item => {
                            summary += `• ${item.product.displayInfo()} x${item.quantity}\n`;
                        });
                        summary += `Total: $${this.calculateTotal().toFixed(2)}`;
                        return summary;
                    }
                }
                
                let result = "=== Exercise 7: Cart Class Management ===\n\n";
                
                const cart = new Cart();
                const laptop = new Product("Laptop", 999, "Gaming laptop");
                const mouse = new Product("Mouse", 25, "Wireless mouse");
                
                cart.addItem(laptop, 1);
                cart.addItem(mouse, 2);
                
                result += "After adding items:\n";
                result += cart.getCartSummary() + "\n\n";
                
                cart.sort();
                result += "After sorting by price:\n";
                result += cart.getCartSummary() + "\n\n";
                
                cart.updateQuantity(mouse, 1);
                result += "After reducing mouse quantity:\n";
                result += cart.getCartSummary() + "\n\n";
                
                result += "Cart management features:\n";
                result += "• Add/remove/update item quantities\n";
                result += "• Automatic duplicate item consolidation\n";
                result += "• Sorting using static Product.compare\n";
                result += "• Total calculation and cart summary\n";
                result += "• Validation for products and quantities";
                
                output.textContent = result;
            }

            function runEcommerceExercise8() {
                const output = document.getElementById('ecommerce-output');
                
                // Complete eCommerce system with sales and discounts
                class Product {
                    constructor(name, price, description) {
                        this.name = name;
                        this.price = price;
                        this.description = description;
                        this.isOnSale = false;
                    }
                    
                    displayInfo() {
                        const saleTag = this.isOnSale ? " (ON SALE)" : "";
                        return `${this.name} - $${this.price}: ${this.description}${saleTag}`;
                    }
                    
                    static compare(product1, product2) {
                        return product1.price - product2.price;
                    }
                }
                
                class TV extends Product {
                    static salePrice = 1200;
                    static getSalePrice() { return this.salePrice; }
                    
                    constructor(name, price, description, screenSize) {
                        super(name, price, description);
                        this.screenSize = screenSize;
                    }
                }
                
                class Cart {
                    constructor() {
                        this.items = [];
                        this.discountCodes = [
                            { code: "SAVE20", discountPercentage: 20, isApplied: false }
                        ];
                    }
                    
                    addItem(product, quantity) {
                        const existingItem = this.items.find(item => item.product === product);
                        if (existingItem) {
                            existingItem.quantity += quantity;
                        } else {
                            this.items.push({ product, quantity });
                        }
                    }
                    
                    applyDiscountCode(code) {
                        const discount = this.discountCodes.find(d => d.code === code);
                        if (!discount) throw new Error('Invalid discount code');
                        discount.isApplied = true;
                    }
                    
                    calculateTotal() {
                        let total = this.items.reduce((sum, item) => {
                            let itemPrice = item.product.price;
                            if (item.product.isOnSale && item.product.constructor.getSalePrice) {
                                itemPrice = item.product.constructor.getSalePrice();
                            }
                            return sum + (itemPrice * item.quantity);
                        }, 0);
                        
                        // Apply discounts
                        this.discountCodes.forEach(discount => {
                            if (discount.isApplied) {
                                total *= (1 - discount.discountPercentage / 100);
                            }
                        });
                        
                        return Math.round(total * 100) / 100;
                    }
                    
                    getCartSummary() {
                        let summary = "🛒 Complete Transaction System:\n\n";
                        
                        this.items.forEach(item => {
                            summary += `• ${item.product.displayInfo()} x${item.quantity}\n`;
                        });
                        
                        const appliedDiscounts = this.discountCodes.filter(d => d.isApplied);
                        if (appliedDiscounts.length > 0) {
                            summary += "\n💰 Applied Discounts:\n";
                            appliedDiscounts.forEach(d => {
                                summary += `• ${d.code}: ${d.discountPercentage}% off\n`;
                            });
                        }
                        
                        summary += `\n💵 Total: $${this.calculateTotal()}`;
                        return summary;
                    }
                }
                
                let result = "=== Exercise 8: Complete Transaction System ===\n\n";
                
                // Create products
                const tv = new TV("Premium TV", 1500, "75-inch 4K TV", 75);
                const laptop = new Product("Gaming Laptop", 1200, "High-performance laptop");
                
                // Set TV on sale
                tv.isOnSale = true;
                
                // Create cart and add items
                const cart = new Cart();
                cart.addItem(tv, 1);
                cart.addItem(laptop, 1);
                
                result += "Cart with regular and sale items:\n";
                result += cart.getCartSummary() + "\n\n";
                
                // Apply discount
                try {
                    cart.applyDiscountCode("SAVE20");
                    result += "After applying 20% discount code:\n";
                    result += cart.getCartSummary() + "\n\n";
                } catch (error) {
                    result += `Discount error: ${error.message}\n\n`;
                }
                
                result += "🚀 Advanced eCommerce features:\n";
                result += "• Sale price system with static methods\n";
                result += "• Discount code validation and application\n";
                result += "• Complex total calculation with multiple factors\n";
                result += "• Complete transaction workflow simulation\n";
                result += "• Real-world eCommerce system architecture\n";
                result += "• Error handling and validation throughout";
                
                output.textContent = result;
            }

            // Initialize basketball game display
            document.addEventListener('DOMContentLoaded', function() {
                basketballGame.updateDisplay();
            });
        </script>
    </body>
</html>